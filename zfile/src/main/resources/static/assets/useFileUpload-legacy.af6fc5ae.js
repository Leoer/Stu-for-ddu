!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),i=new C(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return A()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var l=x(i,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}t.wrap=c;var d={};function p(){}function f(){}function h(){}var g={};s(g,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(E([])));m&&m!==n&&r.call(m,o)&&(g=m);var y=h.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,o,i,l){var s=u(e[a],e,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=h,s(y,"constructor",h),s(h,"constructor",f),f.displayName=s(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new w(c(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,l,"Generator"),s(y,o,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function t(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,a)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function l(e){t(i,a,o,l,s,"next",e)}function s(e){t(i,a,o,l,s,"throw",e)}l(void 0)}))}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./request-legacy.e2497089.js","./index-legacy.2de5676a.js","./common-legacy.af649da4.js","./index-legacy.c7b26f61.js","./index-legacy.5e99e13c.js","./base-legacy.f53a0713.js"],(function(t){"use strict";var o,i,l,c,u,d,p,f,h,g,v,m,y,b,w,x,k,S,C,E,A,L,O,T,_,z,j,P,M,I,R,D,B,F,N,$,U,V,K,W,G,H,q,Y,Q,Z,J,X,ee,te,ne,re,ae,oe,ie,le,se,ce,ue,de,pe,fe,he,ge,ve,me,ye;return{setters:[function(e){o=e.u,i=e.e,l=e.f,c=e.b,u=e.g,d=e.E,p=e.h,f=e.i,h=e.j},function(e){g=e.d,v=e.r,m=e.c,y=e.o,b=e.ai,w=e.a,x=e.b,k=e.e,S=e.Q,C=e.R,E=e.p,A=e.n,L=e.q,O=e.k,T=e.t,_=e.i,z=e.g,j=e.f,P=e.F,M=e.j,I=e.h,R=e.T,D=e.Y,B=e.m,F=e.a6,N=e.ar,$=e.M,U=e.w,V=e.W,K=e.ah,W=e.U,G=e.V,H=e.as,q=e.u,Y=e.S,Q=e.at,Z=e.Z,J=e.a4,X=e.a8,ee=e.$,te=e.au,ne=e.a7},function(e){re=e.c},function(e){ae=e.E},function(e){oe=e.E},function(e){ie=e.b,le=e.d,se=e.E,ce=e.M,ue=e.u,de=e.T,pe=e._,fe=e.N,he=e.O,ge=e.A,ve=e.P,me=e.Q,ye=e.R}],execute:function(){t({c:De,d:Me,e:function(){let t=$(),r=t.storageKey,a=t.currentPath;const o=ca.globalConfig.maxFileUploads,i=e=>{let t=sa.fileList.find((t=>{if(t.name===e.file.name)return t}));t?_e({zIndex:9999,title:"提示",message:`当前目录已存在文件 ${t.name}, 跳过上传.`,type:"warning"}):s(e.file)},s=e=>{const t=ya++;let n=a.value;if(e.webkitRelativePath||e.dropUploadPath){let t=e.webkitRelativePath||e.dropUploadPath;t.startsWith("/")||(t="/"+t);let r=t.split("/");r.forEach(((e,t)=>{let a=0===t,o=r.length-1===t;a||o||e&&(n+="/"+e)}))}let i={storageKey:r.value,path:re.removeDuplicateSeparator(n),name:e.name,size:e.size};if(console.log("当前上传信息:",i,", 当前同时上传文件数:",b.value.totalUploading,"限制同时上传文件数:",o),b.value.totalUploading>=o)return console.log(`上传文件数超出 ${o}, 等待上传`),void ga.push({index:t,file:e});let s={name:e.name,size:e.size,speed:"-",progress:0,loaded:0,status:"uploading",startTime:Date.now(),file:e,index:t};var d;ha.push(s),va.set(t,ne.CancelToken.source()),ma.set(t,ha[ha.length-1]),(d=i,d.password=Kt(d.path),l({url:"/api/file/operator/upload/file",method:"post",data:d})).then((n=>{(0,h(`cancel-upload-${t}`).on)((()=>{let n=va.get(t);n&&(n.cancel(),ha.find(((t,n)=>{let r=t.name===e.name;return r&&ha.splice(n,1),r})))}));let r=re.storageType.proxyType,a=re.storageType.s3Type,o=re.storageType.micrsoftType;r.includes(sa.currentStorageSource.type.key)?c(e,n.data,t):a.includes(sa.currentStorageSource.type.key)?u(e,n.data,t):o.includes(sa.currentStorageSource.type.key)?p(e,n.data,t):"upyun"===sa.currentStorageSource.type.key&&f(e,n.data,t)})).catch((e=>{g(t,e)}))},c=(e,t,n)=>{let r=new FormData;r.append("file",e),ne.post(t,r,{cancelToken:va.get(n).token,onUploadProgress:e=>{y(e,n,!0)}}).then((()=>{v(n)})).catch((e=>{g(n,e)}))},u=(e,t,n)=>{ne.put(t,e,{withCredentials:!1,cancelToken:va.get(n).token,onUploadProgress:e=>{y(e,n)}}).then((()=>{v(n)})).catch((e=>{g(n,e)}))},p=(e,t,n)=>{let r=1,a=0,o=0,i=e.size;const l=104857599,s=()=>{o=a+l>=i?i:a+l,r>1&&va.set(n,ne.CancelToken.source());let c=e.slice(a,o);ne.put(`${t}`,c,{cancelToken:va.get(n).token,timeout:1e7,headers:{"Content-Type":"application/octet-stream","Content-Range":`bytes ${a}-${o-1}/${e.size}`},type:"sync",withCredentials:!1,onUploadProgress:e=>{if(e.lengthComputable){let t=ma.get(n);const r=e.loaded+a;t.size=i,t.loaded=r,t.progress=Math.round(r/i*100),t.speed=re.fileSizeFormat(Math.round(r/(Date.now()-t.startTime)*1e3))}}}).then((e=>{202===e.status?(a+=l,r+=1,s()):201===e.status&&v(n)})).catch((e=>{g(n,e)}))};s()},f=(e,t,n)=>{let r=JSON.parse(t),a=new FormData;a.append("name",e.name),a.append("authorization",r.signature),a.append("policy",r.policy),a.append("file",e),ne.post(r.url,a,{withCredentials:!1,cancelToken:va.get(n).token,onUploadProgress:e=>{y(e,n)}}).then((()=>{v(n)})).catch((e=>{g(n,e)}))},g=(e,t)=>{var n;let r=ma.get(e);r.status="error",r.endTime=Date.now(),r.msg=(null==t||null===(n=t.response)||void 0===n?void 0:n.data)||t},v=e=>{let t=ma.get(e);t.progress=100,t.status="finished",t.endTime=Date.now(),t.msg="上传成功"},y=(e,t,n)=>{let r=ma.get(t);r.size=e.total,r.loaded=e.loaded,r.progress=Math.round(e.loaded/e.total*100),r.speed=re.fileSizeFormat(Math.round(e.loaded/(Date.now()-r.startTime)*1e3)),console.log("uploadFileInfo",r,n),n&&100===r.progress&&(r.msg="上传完成, 服务器中转中...")},b=m((()=>{let e=ha.length,t=0,n=0;ha.forEach((e=>{"uploading"===e.status?t++:"finished"===e.status&&n++}));let r=t+ga.length;return{totalSize:e,totalUploading:t,totalFinish:n,totalUploadingAndWaiting:r}})),w=m((()=>{let e=[];return e.push(...ha),ga.forEach((t=>{e.push({name:t.file.name,size:t.file.size,status:"waiting",msg:"排队中...",index:t.index})})),e.sort(((e,t)=>{let n=e.status,r=t.status;return n!==r?ba[n]-ba[r]:e.startTime!==t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),console.log("uploadProgressInfoSorted",e),e}));da||(U((()=>b.value.totalUploading),(e=>{if(e<o)if(console.log("检测到上传中的文件个数小于最大上传限制."),0===ga.length)console.log("等待上传的文件数为 0, 无需继续上传.");else{let e=ga.splice(0,1)[0];i({file:e.file}),console.log("开始从等待队列中获取上传文件: ",e.file.name)}})),da=!0);const x=e=>{if(null==e)return;let t=ha.findIndex(((t,n)=>{if(t.index===e)return ha.splice(n,1),!0}));-1===t&&(t=ga.findIndex(((t,n)=>{if(t.index===e)return ga.splice(n,1),!0}))),-1!==t&&(ma.delete(e),va.delete(e))};return{visible:pa,uploadMode:fa,openUploadDialog:()=>{pa.value=!0,fa.value="file"},openUploadFolderDialog:()=>{pa.value=!0,fa.value="folder",Z((()=>{document.getElementsByClassName("el-upload__input")[0].webkitdirectory=!0}))},cancelUpload:e=>{ae.confirm(`是否确定取消文件 ${e.name} 上传？`,"提示",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning",callback:t=>{"confirm"===t&&h(`cancel-upload-${e.index}`).emit()}})},dropState:ua,listenDropFile:t=>{t=document.querySelector("body");const a=e=>{var t,n,a,o;let s=(null===(t=e.dataTransfer)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0;if(c(),ua.value=!1,ra()&&s)return;if(document.querySelector(".is-message-box .el-input__inner")===document.activeElement)return;if(!r.value)return;if(!ca.permission.upload)return;e.stopPropagation(),e.preventDefault();const u=oe.service({text:"文件读取中...",background:"rgba(0, 0, 0, .3)"}),d=(null===(a=e.clipboardData)||void 0===a?void 0:a.items)||(null===(o=e.dataTransfer)||void 0===o?void 0:o.items);l(d).then((e=>{if(Z((()=>{u.close()})),0===e.length)return;let t=[];e.forEach(((e,n)=>{".DS_Store"===e.name&&t.push(n)}));const n=()=>{pa.value=!0,e.forEach((e=>{i({file:e})}))};t.length>0?ae.confirm(`检测到有 ${t.length} 个 .DS_Store 文件，是否上传时跳过这些文件`,"提示",{confirmButtonText:"跳过这些文件",cancelButtonText:"依旧上传",type:"success",callback:r=>{if("confirm"===r)for(let n=t.length-1;n>=0;n--){let r=t[n];e.splice(r,1)}n()}}):e.length>100?ae.confirm(`文件数量为 ${e.length} 个，是否确认上传？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:e=>{"confirm"===e&&n()}}):n()}))};let o=null;t.addEventListener("dragenter",(e=>{r.value&&(pa.value||ca.permission.upload&&(o=e.target,s(),e.stopPropagation(),e.preventDefault(),ua.value=!0))}),!1),t.addEventListener("dragover",(function(e){r.value&&(pa.value||ca.permission.upload&&(e.stopPropagation(),e.preventDefault(),ua.value=!0))}),!1),t.addEventListener("dragleave",(function(e){r.value&&(pa.value||ca.permission.upload&&(o===e.target&&(c(),ua.value=!1),e.stopPropagation(),e.preventDefault()))}),!1),t.addEventListener("drop",a,!1),t.addEventListener("paste",a,!1);const l=function(){var t=n(e().mark((function t(n){var r,a,o,i,l,s,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],a=[],!n){e.next=39;break}o=new Array(...n),i=0;case 5:if(!(i<o.length)){e.next=27;break}if(l=o[i],s=null,!l.webkitGetAsEntry){e.next=17;break}if(s=l.webkitGetAsEntry()){e.next=15;break}if(!(s=l.getAsFile())){e.next=15;break}return r.push(s),e.abrupt("continue",24);case 15:e.next=23;break;case 17:if(!l.getAsEntry){e.next=21;break}s=l.getAsEntry(),e.next=23;break;case 21:return d.warning("浏览器不支持拖拽上传"),e.abrupt("return");case 23:a.push(s);case 24:i++,e.next=5;break;case 27:if(!(a.length>0)){e.next=39;break}i=0;case 29:if(!(i<a.length)){e.next=39;break}if(!(s=a[i])){e.next=36;break}return e.next=34,h(s);case 34:c=e.sent,Array.isArray(c)?f(c,r):r.push(c);case 36:i++,e.next=29;break;case 39:return e.abrupt("return",r);case 40:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=()=>{t.classList.add("dragging-over")},c=()=>{t.classList.remove("dragging-over")};function u(e){return new Promise(((t,n)=>{e.file((e=>{t(e)}))}))}function p(e){return new Promise(((t,n)=>{e.readEntries((e=>{t(e)}))}))}function f(e,t){for(let n=0;n<e.length;n++)Array.isArray(e[n])?f(e[n],t):t.push(e[n])}function h(e){return g.apply(this,arguments)}function g(){return g=n(e().mark((function t(n){var r,a,o,i,l,s,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.fullPath||"",a=[],!n.isFile){e.next=10;break}return e.next=5,u(n);case 5:return(o=e.sent).dropUploadPath=r,e.abrupt("return",o);case 10:if(!n.isDirectory){e.next=25;break}return i=n.createReader(),e.next=14,p(i);case 14:l=e.sent,s=0;case 16:if(!(s<l.length)){e.next=24;break}return e.next=19,h(l[s]);case 19:c=e.sent,a.push(c);case 21:s++,e.next=16;break;case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}}),t)}))),g.apply(this,arguments)}},beforeUpload:i,uploadFile:s,uploadProgressInfoSorted:w,uploadProgressInfoStatistics:b,clearALlFinishedUploadFile:()=>{let e=0;for(let t=ha.length-1;t>=0;t--){let n=ha[t];"finished"===n.status&&(e++,ha.splice(t,1),ma.delete(n.index),va.delete(n.index))}return e},removeUploadFileByIndex:x,retryUpload:e=>{console.log("重新上传文件",e),x(e.index),s(e.file)}}},f:Er,g:function(){la=(e,t)=>{var n;if(void 0===t)return void qr(e);let r="selection"===t.type;if(!r&&"click"===Fr.globalConfig.fileClickMode)return void qr(e);if(Hr.value)return;let a=1===Qr.value.length&&(null===(n=Zr.value)||void 0===n?void 0:n.name)===e.name;if(Vr.value){let t=Nr.fileList.findIndex((e=>e.name===Zr.value.name));if(null!==t){let n=Nr.fileList.findIndex((t=>t.name===e.name)),r=Math.min(n,t),a=Math.max(n,t);for(let e=r+1;e<a;e++){let t=Nr.fileList[e];Xr(t,!0)}}}else Kr.value||a||r||Jr();Xr(e)};return{tableClickRow:la,tableDbClickRow:e=>{Hr.value||qr(e)},tableHoverRow:(e,t,n,r)=>{if(1===r.buttons&&-1!==aa.value){if(-1===oa.value){Jr();let e=Nr.fileList[aa.value];Xr(e,!0)}let t=e.index,n=oa.value>=0?oa.value:t-1,r=Math.min(n,t),a=Math.max(n,t);for(let e=r;e<=a;e++){let t=Nr.fileList[e];Xr(t,!0)}oa.value=t}},tableLeaveRow:(e,t,n,r)=>{1===r.buttons&&-1===aa.value&&(aa.value=e.index)}}},h:Br,i:Yn,j:Qe,n:Vt});const be=["success","info","warning","error"],we=ie({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:le([String,Object]),default:""},id:{type:String,default:""},message:{type:le([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:le(Function),default:()=>{}},onClose:{type:le(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...be,""],default:""},zIndex:{type:Number,default:0}}),xe=g({name:"ElNotification",components:s({ElIcon:se},ce),props:we,emits:{destroy:()=>!0},setup(e){const t=ue("notification"),n=v(!1);let r;const a=m((()=>{const n=e.type;return n&&de[e.type]?t.m(n):""})),i=m((()=>de[e.type]||e.icon||"")),l=m((()=>e.position.endsWith("right")?"right":"left")),s=m((()=>e.position.startsWith("top")?"top":"bottom")),c=m((()=>({[s.value]:`${e.offset}px`,zIndex:e.zIndex})));function u(){if(e.duration>0){var t=fe((()=>{n.value&&p()}),e.duration);r=t.stop}}function d(){null==r||r()}function p(){n.value=!1}return y((()=>{u(),n.value=!0})),o(document,"keydown",(function({code:e}){e===he.delete||e===he.backspace?d():e===he.esc?n.value&&p():u()})),{ns:t,horizontalClass:l,typeClass:a,iconComponent:i,positionStyle:c,visible:n,close:p,clearTimer:d,startTimer:u}}}),ke=["id"],Se=["textContent"],Ce={key:0},Ee=["innerHTML"];var Ae=pe(xe,[["render",function(e,t,n,r,a,o){const i=b("el-icon"),l=b("close");return w(),x(R,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=t=>e.$emit("destroy")),persisted:""},{default:k((()=>[S(E("div",{id:e.id,class:A([e.ns.b(),e.customClass,e.horizontalClass]),style:_(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...t)=>e.clearTimer&&e.clearTimer(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.startTimer&&e.startTimer(...t)),onClick:t[2]||(t[2]=(...t)=>e.onClick&&e.onClick(...t))},[e.iconComponent?(w(),x(i,{key:0,class:A([e.ns.e("icon"),e.typeClass])},{default:k((()=>[(w(),x(L(e.iconComponent)))])),_:1},8,["class"])):O("v-if",!0),E("div",{class:A(e.ns.e("group"))},[E("h2",{class:A(e.ns.e("title")),textContent:T(e.title)},null,10,Se),S(E("div",{class:A(e.ns.e("content")),style:_(e.title?void 0:{margin:0})},[z(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(w(),j(P,{key:1},[O(" Caution here, message could've been compromized, nerver use user's input as message "),O(" eslint-disable-next-line "),E("p",{innerHTML:e.message},null,8,Ee)],2112)):(w(),j("p",Ce,T(e.message),1))]))],6),[[C,e.message]]),e.showClose?(w(),x(i,{key:0,class:A(e.ns.e("closeBtn")),onClick:M(e.close,["stop"])},{default:k((()=>[I(l)])),_:1},8,["class","onClick"])):O("v-if",!0)],2)],46,ke),[[C,e.visible]])])),_:3},8,["name","onBeforeLeave"])}],["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const Le={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]};let Oe=1;const Te=function e(t={},n=null){if(!ge)return{close:()=>{}};("string"==typeof t||D(t))&&(t={message:t});const r=t.position||"top-right";let a=t.offset||0;Le[r].forEach((({vm:e})=>{var t;a+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+16})),a+=16;const o=ve().nextZIndex,i="notification_"+Oe++,l=t.onClose,c=s(s({zIndex:o(),offset:a},t),{},{id:i,onClose:()=>{!function(e,t,n){const r=Le[t],a=r.findIndex((({vm:t})=>{var n;return(null==(n=t.component)?void 0:n.props.id)===e}));if(-1===a)return;const o=r[a].vm;if(!o)return;null==n||n(o);const i=o.el.offsetHeight,l=t.split("-")[0];r.splice(a,1);const s=r.length;if(s<1)return;for(let c=a;c<s;c++){const e=r[c].vm,t=e.el,n=e.component,a=Number.parseInt(t.style[l],10)-i-16;n.props.offset=a}}(i,r,l)}});let u=document.body;me(t.appendTo)?u=t.appendTo:B(t.appendTo)&&(u=document.querySelector(t.appendTo)),me(u)||(u=document.body);const d=document.createElement("div"),p=I(Ae,c,D(c.message)?{default:()=>c.message}:null);return p.appContext=null!=n?n:e._context,p.props.onDestroy=()=>{F(null,d)},F(p,d),Le[r].push({vm:p}),u.appendChild(d.firstElementChild),{close:()=>{p.component.proxy.visible=!1}}};be.forEach((e=>{Te[e]=(t={})=>(("string"==typeof t||D(t))&&(t={message:t}),Te(s(s({},t),{},{type:e})))})),Te.closeAll=function(){for(var e=0,t=Object.values(Le);e<t.length;e++){t[e].forEach((({vm:e})=>{e.component.proxy.visible=!1}))}},Te._context=null;const _e=ye(Te,"$notify"),ze=i(),je=ze.width,Pe=ze.height;function Me(){const e=m((()=>je.value<768)),t=m((()=>je.value>=768)),n=e=>null==e||""===e;return{isMobile:e,isNotMobile:t,height:Pe,encodeAllIgnoreSlashes:e=>{if(n(e))return"";let t="",r=-1;for(let n=0;n<e.length;n++){const a=e.charAt(n);if("/"===a){if(r<n){let a=e.substring(r+1,n);t+=encodeURIComponent(a),r=n}t+=a}if(n===e.length-1&&r<n){let a=e.substring(r+1,n+1);t+=encodeURIComponent(a)}}return t},strIsEmpty:n,strIsNotEmpty:e=>!n(e),removeDuplicateSeparator:e=>{let t="";0===e.indexOf("http://")?t="http://":0===e.indexOf("https://")&&(t="https://");for(let n=t.length;n<e.length-1;n++){let r=e.charAt(n),a=e.charAt(n+1);"/"===r&&"/"===a||(t+=r)}return t+=e.charAt(e.length-1),t}}}const Ie=v([]);let Re=null;function De(e){e&&(Re=e);const t=m((()=>Ie.value.length>0?Ie.value[Ie.value.length-1]:null)),n=m((()=>Ie.value.filter((e=>"FILE"===e.type)))),r=m((()=>Ie.value.filter((e=>"FOLDER"===e.type)))),a=m((()=>{let e=Ie.value.length;return{isSingleSelect:1===e,isMultiSelect:e>1,isAllFile:n.value.length===e,isAllFolder:r.value.length===e}}));return{checkSelectable:e=>"FILE"===e.type||"FOLDER"===e.type,tableRowClassName:({row:e,rowIndex:t})=>(e.index=t,-1!==Ie.value.indexOf(e)?"select-row":""),selectRowsChange:e=>{Ie.value=e},selectRow:t,selectRows:Ie,selectFiles:n,selectFolders:r,selectStatistics:a,clearSelection:()=>{Re.proxy.$refs.fileTableRef.clearSelection()},toggleRowSelection:(e,t)=>{"BACK"!==(null==e?void 0:e.type)&&Re.proxy.$refs.fileTableRef.toggleRowSelection(e,t)},toggleAllSelection:()=>{Re.proxy.$refs.fileTableRef.toggleAllSelection()}}}let Be=De().selectStatistics;const Fe=t("a",N("storageConfigStore",{state:()=>({globalConfig:{siteName:"",directLinkPrefix:"",infoEnable:!1,showLinkBtn:!1,recordDownloadLog:!1,showShortLink:!1,showPathLink:!1,tableSize:"small",rootShowStorage:!0,fileClickMode:"dbclick",showDocument:!1,debugMode:!1,domain:"",icp:"",avatar:"",announcement:"",layout:"full",showAnnouncement:!1,searchEnable:!1,showLogin:!1},folderConfig:{readmeText:null,readmeDisplayMode:null,defaultSwitchToImgMode:!1,enableFileOperator:!1}}),getters:{permission:e=>({open:Be.value.isSingleSelect&&Be.value.isAllFolder,preview:Be.value.isAllFile&&Be.value.isSingleSelect,download:Be.value.isAllFile,link:Be.value.isAllFile&&e.globalConfig.showLinkBtn&&(e.globalConfig.showShortLink||e.globalConfig.showPathLink),rename:e.folderConfig.enableFileOperator&&Be.value.isSingleSelect,delete:e.folderConfig.enableFileOperator,newFolder:e.folderConfig.enableFileOperator,upload:e.folderConfig.enableFileOperator,pathLink:e.globalConfig.showPathLink,shortLink:e.globalConfig.showShortLink})},actions:{updateGlobalConfig(e){this.globalConfig=e},updateFolderConfig(e){this.folderConfig=e}}})),Ne=(t("r",(e=>l({url:"/api/site/reset-password",method:"get",data:e}))),t("u",N("fileDataStore",{state:()=>({currentClickRow:{},currentRightClickRow:{},currentStorageSource:{id:null,type:{description:"",key:""}},imgMode:!1,newImgMode:!1,oldStorageKey:null,searchParam:"",fileListSource:[],audioArray:[],audioIndex:0}),getters:{filterFileByType:e=>t=>e.fileListSource.filter((function(e){if("BACK"===e.type)return!1;let n=e.name,r=n.substr(n.lastIndexOf(".")+1).toLowerCase();return-1!==re.constant.fileTypeMap[t].indexOf(r)})),fileList:e=>{let t=e.fileListSource;return t.forEach((e=>{if(e.icon||(e.icon=re.getFileIconName(e)),null!==e.preview){var t=re.getFileType(e.name);t?(e.fileType=t,e.preview=-1!==re.constant.previewFileType.indexOf(t)):e.preview=!1}})),t}},actions:{updateCurrentStorageSource(e){this.currentStorageSource=e},updateAudioIndex(e){this.audioIndex=e},updateAudioList(e){this.audioArray=e},updateCurrentClickRow(e){this.currentClickRow=e},updateCurrentRightClickRow(e){this.currentRightClickRow=e},updateFileList(e){this.fileListSource=e},updateOldStorageKey(e){this.oldStorageKey=e}}})));let $e=Ne(),Ue=Fe(),Ve=$(),Ke=Ve.routerRef,We=Ve.fullpath,Ge=Ve.storageKey,He=v([]),qe=v(),Ye=!1;function Qe(){let e=Ue.globalConfig.rootShowStorage;const t=e=>{if(Ge.value){o(Ge.value)?qe.value=Ge.value:a()}else e?($e.updateFileList(n.value),document.title=Ue.globalConfig.siteName+" | 首页"):a();r()},n=m((()=>{let e=[];return He.value.forEach((t=>{e.push({name:t.name,path:t.key,size:0,time:"-",type:"ROOT"})})),e})),r=()=>{He.value.some((e=>{e.key===qe.value&&$e.updateCurrentStorageSource(e)}))};Ye||(U((()=>qe.value),((e,t)=>{(e&&!We.value||void 0!==t)&&(Ke.value.push("/"+e),r())})),U((()=>Ge.value),(e=>{t(!0)})),Ye=!0);const a=()=>{if(He.value.length>0){let e=He.value[0].key;qe.value=e,Ke.value.push("/"+e)}},o=e=>He.value.find((t=>{if(t.key==e)return t}));return{loadStorageSourceList:()=>new Promise((n=>{var r;l({url:"/api/storage/list",method:"get",data:r}).then((r=>{He.value=r.data,0!==He.value.length?(t(e),n(r)):ae.confirm("当前无可用存储源，是否跳转至管理员页面添加存储源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",callback:e=>{"confirm"===e&&Ke.value.push("/login")}})}))})),storageList:He,findStorageByKey:o,currentStorageKey:qe,storageListAsFileList:n}}var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var Je=t("k",Ze.removeDuplicateSlashes=Ze.transform=void 0);const Xe=/(?!^)\/{2,}/g;function et(e){return e.replace(Xe,"/")}Ze.transform=function(e){return e.map((e=>et(e)))},t("k",Je=Ze.removeDuplicateSlashes=et);var tt="object"==typeof process&&process&&"win32"===process.platform?{sep:"\\"}:{sep:"/"},nt=rt;function rt(e,t,n){e instanceof RegExp&&(e=at(e,n)),t instanceof RegExp&&(t=at(t,n));var r=ot(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function at(e,t){var n=t.match(e);return n?n[0]:null}function ot(e,t,n){var r,a,o,i,l,s=n.indexOf(e),c=n.indexOf(t,s+1),u=s;if(s>=0&&c>0){if(e===t)return[s,c];for(r=[],o=n.length;u>=0&&!l;)u==s?(r.push(u),s=n.indexOf(e,u+1)):1==r.length?l=[r.pop(),c]:((a=r.pop())<o&&(o=a,i=c),c=n.indexOf(t,u+1)),u=s<c&&s>=0?s:c;r.length&&(l=[o,i])}return l}rt.range=ot;var it=nt,lt=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return wt(function(e){return e.split("\\\\").join(st).split("\\{").join(ct).split("\\}").join(ut).split("\\,").join(dt).split("\\.").join(pt)}(e),!0).map(ht)},st="\0SLASH"+Math.random()+"\0",ct="\0OPEN"+Math.random()+"\0",ut="\0CLOSE"+Math.random()+"\0",dt="\0COMMA"+Math.random()+"\0",pt="\0PERIOD"+Math.random()+"\0";function ft(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function ht(e){return e.split(st).join("\\").split(ct).join("{").split(ut).join("}").split(dt).join(",").split(pt).join(".")}function gt(e){if(!e)return[""];var t=[],n=it("{","}",e);if(!n)return e.split(",");var r=n.pre,a=n.body,o=n.post,i=r.split(",");i[i.length-1]+="{"+a+"}";var l=gt(o);return o.length&&(i[i.length-1]+=l.shift(),i.push.apply(i,l)),t.push.apply(t,i),t}function vt(e){return"{"+e+"}"}function mt(e){return/^-?0\d/.test(e)}function yt(e,t){return e<=t}function bt(e,t){return e>=t}function wt(e,t){var n=[],r=it("{","}",e);if(!r)return[e];var a=r.pre,o=r.post.length?wt(r.post,!1):[""];if(/\$$/.test(r.pre))for(var i=0;i<o.length;i++){var l=a+"{"+r.body+"}"+o[i];n.push(l)}else{var s,c,u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),p=u||d,f=r.body.indexOf(",")>=0;if(!p&&!f)return r.post.match(/,.*\}/)?wt(e=r.pre+"{"+r.body+ut+r.post):[e];if(p)s=r.body.split(/\.\./);else if(1===(s=gt(r.body)).length&&1===(s=wt(s[0],!1).map(vt)).length)return o.map((function(e){return r.pre+s[0]+e}));if(p){var h=ft(s[0]),g=ft(s[1]),v=Math.max(s[0].length,s[1].length),m=3==s.length?Math.abs(ft(s[2])):1,y=yt;g<h&&(m*=-1,y=bt);var b=s.some(mt);c=[];for(var w=h;y(w,g);w+=m){var x;if(d)"\\"===(x=String.fromCharCode(w))&&(x="");else if(x=String(w),b){var k=v-x.length;if(k>0){var S=new Array(k+1).join("0");x=w<0?"-"+S+x.slice(1):S+x}}c.push(x)}}else{c=[];for(var C=0;C<s.length;C++)c.push.apply(c,wt(s[C],!1))}for(C=0;C<c.length;C++)for(i=0;i<o.length;i++){l=a+c[C]+o[i];(!t||p||l)&&n.push(l)}}return n}const xt=(e,t,n={})=>(It(t),!(!n.nocomment&&"#"===t.charAt(0))&&new Dt(t,n).match(e));var kt=xt;const St=tt;xt.sep=St.sep;const Ct=Symbol("globstar **");xt.GLOBSTAR=Ct;const Et=lt,At={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Lt="[^/]",Ot="[^/]*?",Tt=e=>e.split("").reduce(((e,t)=>(e[t]=!0,e)),{}),_t=Tt("().*{}+?[]^$\\!"),zt=Tt("[.("),jt=/\/+/;xt.filter=(e,t={})=>(n,r,a)=>xt(n,e,t);const Pt=(e,t={})=>{const n={};return Object.keys(e).forEach((t=>n[t]=e[t])),Object.keys(t).forEach((e=>n[e]=t[e])),n};xt.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return xt;const t=xt,n=(n,r,a)=>t(n,r,Pt(e,a));return(n.Minimatch=class extends t.Minimatch{constructor(t,n){super(t,Pt(e,n))}}).defaults=n=>t.defaults(Pt(e,n)).Minimatch,n.filter=(n,r)=>t.filter(n,Pt(e,r)),n.defaults=n=>t.defaults(Pt(e,n)),n.makeRe=(n,r)=>t.makeRe(n,Pt(e,r)),n.braceExpand=(n,r)=>t.braceExpand(n,Pt(e,r)),n.match=(n,r,a)=>t.match(n,r,Pt(e,a)),n},xt.braceExpand=(e,t)=>Mt(e,t);const Mt=(e,t={})=>(It(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Et(e)),It=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")},Rt=Symbol("subparse");xt.makeRe=(e,t)=>new Dt(e,t||{}).makeRe(),xt.match=(e,t,n={})=>{const r=new Dt(t,n);return e=e.filter((e=>r.match(e))),r.options.nonull&&!e.length&&e.push(t),e};class Dt{constructor(e,t){It(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,n),n=this.globParts=n.map((e=>e.split(jt))),this.debug(this.pattern,n),n=n.map(((e,t,n)=>e.map(this.parse,this))),this.debug(this.pattern,n),n=n.filter((e=>-1===e.indexOf(!1))),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;const e=this.pattern;let t=!1,n=0;for(let r=0;r<e.length&&"!"===e.charAt(r);r++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}matchOne(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var a=0,o=0,i=e.length,l=t.length;a<i&&o<l;a++,o++){this.debug("matchOne loop");var s,c=t[o],u=e[a];if(this.debug(t,c,u),!1===c)return!1;if(c===Ct){this.debug("GLOBSTAR",[t,c,u]);var d=a,p=o+1;if(p===l){for(this.debug("** at the end");a<i;a++)if("."===e[a]||".."===e[a]||!r.dot&&"."===e[a].charAt(0))return!1;return!0}for(;d<i;){var f=e[d];if(this.debug("\nglobstar while",e,d,t,p,f),this.matchOne(e.slice(d),t.slice(p),n))return this.debug("globstar found match!",d,i,f),!0;if("."===f||".."===f||!r.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,d,t,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!n||(this.debug("\n>>> no match, partial?",e,d,t,p),d!==i))}if("string"==typeof c?(s=u===c,this.debug("string match",c,u,s)):(s=u.match(c),this.debug("pattern match",c,u,s)),!s)return!1}if(a===i&&o===l)return!0;if(a===i)return n;if(o===l)return a===i-1&&""===e[a];throw new Error("wtf?")}braceExpand(){return Mt(this.pattern,this.options)}parse(e,t){It(e);const n=this.options;if("**"===e){if(!n.noglobstar)return Ct;e="*"}if(""===e)return"";let r="",a=!!n.nocase,o=!1;const i=[],l=[];let s,c,u,d,p=!1,f=-1,h=-1;const g="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=()=>{if(s){switch(s){case"*":r+=Ot,a=!0;break;case"?":r+=Lt,a=!0;break;default:r+="\\"+s}this.debug("clearStateChar %j %j",s,r),s=!1}};for(let w,x=0;x<e.length&&(w=e.charAt(x));x++)if(this.debug("%s\t%s %s %j",e,x,r,w),o){if("/"===w)return!1;_t[w]&&(r+="\\"),r+=w,o=!1}else switch(w){case"/":return!1;case"\\":v(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,x,r,w),p){this.debug("  in class"),"!"===w&&x===h+1&&(w="^"),r+=w;continue}this.debug("call clearStateChar %j",s),v(),s=w,n.noext&&v();continue;case"(":if(p){r+="(";continue}if(!s){r+="\\(";continue}i.push({type:s,start:x-1,reStart:r.length,open:At[s].open,close:At[s].close}),r+="!"===s?"(?:(?!(?:":"(?:",this.debug("plType %j %j",s,r),s=!1;continue;case")":if(p||!i.length){r+="\\)";continue}v(),a=!0,u=i.pop(),r+=u.close,"!"===u.type&&l.push(u),u.reEnd=r.length;continue;case"|":if(p||!i.length){r+="\\|";continue}v(),r+="|";continue;case"[":if(v(),p){r+="\\"+w;continue}p=!0,h=x,f=r.length,r+=w;continue;case"]":if(x===h+1||!p){r+="\\"+w;continue}c=e.substring(h+1,x);try{RegExp("["+c+"]")}catch(b){d=this.parse(c,Rt),r=r.substr(0,f)+"\\["+d[0]+"\\]",a=a||d[1],p=!1;continue}a=!0,p=!1,r+=w;continue;default:v(),!_t[w]||"^"===w&&p||(r+="\\"),r+=w}for(p&&(c=e.substr(h+1),d=this.parse(c,Rt),r=r.substr(0,f)+"\\["+d[0],a=a||d[1]),u=i.pop();u;u=i.pop()){let e;e=r.slice(u.reStart+u.open.length),this.debug("setting tail",r,u),e=e.replace(/((?:\\{2}){0,64})(\\?)\|/g,((e,t,n)=>(n||(n="\\"),t+t+n+"|"))),this.debug("tail=%j\n   %s",e,e,u,r);const t="*"===u.type?Ot:"?"===u.type?Lt:"\\"+u.type;a=!0,r=r.slice(0,u.reStart)+t+"\\("+e}v(),o&&(r+="\\\\");const m=zt[r.charAt(0)];for(let w=l.length-1;w>-1;w--){const e=l[w],n=r.slice(0,e.reStart),a=r.slice(e.reStart,e.reEnd-8);let o=r.slice(e.reEnd);const i=r.slice(e.reEnd-8,e.reEnd)+o,s=n.split("(").length-1;let c=o;for(let t=0;t<s;t++)c=c.replace(/\)[+*?]?/,"");o=c;r=n+a+o+(""===o&&t!==Rt?"$":"")+i}if(""!==r&&a&&(r="(?=.)"+r),m&&(r=g+r),t===Rt)return[r,a];if(!a)return e.replace(/\\(.)/g,"$1");const y=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+r+"$",y),{_glob:e,_src:r})}catch(b){return new RegExp("$.")}}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,n=t.noglobstar?Ot:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",r=t.nocase?"i":"";let a=e.map((e=>(e=e.map((e=>"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e===Ct?Ct:e._src)).reduce(((e,t)=>(e[e.length-1]===Ct&&t===Ct||e.push(t),e)),[]),e.forEach(((t,r)=>{t===Ct&&e[r-1]!==Ct&&(0===r?e.length>1?e[r+1]="(?:\\/|"+n+"\\/)?"+e[r+1]:e[r]=n:r===e.length-1?e[r-1]+="(?:\\/|"+n+")?":(e[r-1]+="(?:\\/|\\/"+n+"\\/)"+e[r+1],e[r+1]=Ct))})),e.filter((e=>e!==Ct)).join("/")))).join("|");a="^(?:"+a+")$",this.negate&&(a="^(?!"+a+").*$");try{this.regexp=new RegExp(a,r)}catch(o){this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;const n=this.options;"/"!==St.sep&&(e=e.split(St.sep).join("/")),e=e.split(jt),this.debug(this.pattern,"split",e);const r=this.set;let a;this.debug(this.pattern,"set",r);for(let o=e.length-1;o>=0&&(a=e[o],!a);o--);for(let o=0;o<r.length;o++){const i=r[o];let l=e;n.matchBase&&1===i.length&&(l=[a]);if(this.matchOne(l,i,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}static defaults(e){return xt.defaults(e).Minimatch}}xt.Minimatch=Dt;var Bt=kt;let Ft=$(),Nt=Ft.storageKey,$t=Ft.currentPath;const Ut=c("zfile-pwd-cache",{});function Vt(){return{putPathPwd:(e,t)=>{e&&(e=e.startsWith("/")?e:"/"+e,Ut.value[Nt.value]||(Ut.value[Nt.value]={}),e.endsWith("**")&&!e.endsWith("/**")&&(e=Je(e.substring(0,e.length-2)+"/**"),console.log("检测到密码文件夹通配符 ** 前未写 /，自动将其修正为为：",e)),Ut.value[Nt.value][e]=t)},getPathPwd:e=>{let t=e||$t.value;t=re.removeDuplicateSeparator("/"+t+"/");for(var n=0,r=Object.keys(Ut.value);n<r.length;n++){let e=r[n];if(e===Nt.value)for(var a=0,o=Object.keys(Ut.value[e]);a<o.length;a++){let n=o[a];if(Bt(t,n))return Ut.value[e][n]}}return""}}}let Kt=Vt().getPathPwd;const Wt=e=>(e.password=Kt(e.path),l({url:"/api/file/operator/rename/file",method:"post",data:e})),Gt=e=>(e.password=Kt(e.path),l({url:"/api/file/operator/rename/folder",method:"post",data:e}));function Ht(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function qt(e,t){for(var n,r="",a=0,o=-1,i=0,l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===i);else if(o!==l-1&&2===i){if(r.length<2||2!==a||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var s=r.lastIndexOf("/");if(s!==r.length-1){-1===s?(r="",a=0):a=(r=r.slice(0,s)).length-1-r.lastIndexOf("/"),o=l,i=0;continue}}else if(2===r.length||1===r.length){r="",a=0,o=l,i=0;continue}t&&(r.length>0?r+="/..":r="..",a=2)}else r.length>0?r+="/"+e.slice(o+1,l):r=e.slice(o+1,l),a=l-o-1;o=l,i=0}else 46===n&&-1!==i?++i:i=-1}return r}var Yt={resolve:function(){for(var e,t="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var a;r>=0?a=arguments[r]:(void 0===e&&(e=process.cwd()),a=e),Ht(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=qt(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(Ht(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=qt(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Ht(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Ht(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":Yt.normalize(e)},relative:function(e,t){if(Ht(e),Ht(t),e===t)return"";if((e=Yt.resolve(e))===(t=Yt.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,a=r-n,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var i=t.length-o,l=a<i?a:i,s=-1,c=0;c<=l;++c){if(c===l){if(i>l){if(47===t.charCodeAt(o+c))return t.slice(o+c+1);if(0===c)return t.slice(o+c)}else a>l&&(47===e.charCodeAt(n+c)?s=c:0===c&&(s=0));break}var u=e.charCodeAt(n+c);if(u!==t.charCodeAt(o+c))break;47===u&&(s=c)}var d="";for(c=n+s+1;c<=r;++c)c!==r&&47!==e.charCodeAt(c)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(o+s):(o+=s,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Ht(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!a){r=o;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');Ht(e);var n,r=0,a=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var i=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var s=e.charCodeAt(n);if(47===s){if(!o){r=n+1;break}}else-1===l&&(o=!1,l=n+1),i>=0&&(s===t.charCodeAt(i)?-1==--i&&(a=n):(i=-1,a=l))}return r===a?a=l:-1===a&&(a=e.length),e.slice(r,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1);return-1===a?"":e.slice(r,a)},extname:function(e){Ht(e);for(var t=-1,n=0,r=-1,a=!0,o=0,i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47!==l)-1===r&&(a=!1,r=i+1),46===l?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){n=i+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){Ht(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),a=47===r;a?(t.root="/",n=1):n=0;for(var o=-1,i=0,l=-1,s=!0,c=e.length-1,u=0;c>=n;--c)if(47!==(r=e.charCodeAt(c)))-1===l&&(s=!1,l=c+1),46===r?-1===o?o=c:1!==u&&(u=1):-1!==o&&(u=-1);else if(!s){i=c+1;break}return-1===o||-1===l||0===u||1===u&&o===l-1&&o===i+1?-1!==l&&(t.base=t.name=0===i&&a?e.slice(1,l):e.slice(i,l)):(0===i&&a?(t.name=e.slice(1,o),t.base=e.slice(1,l)):(t.name=e.slice(i,o),t.base=e.slice(i,l)),t.ext=e.slice(o,l)),i>0?t.dir=e.slice(0,i-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Yt.posix=Yt;var Qt=Yt;t("m",(e=>l({url:"/api/storage/file/item",method:"post",data:e,config:{responseIntercept:!1,showDefaultMsg:!1}}))),t("l",(()=>l({url:"/api/site/config/global",method:"get"}))),t("b",(e=>l({url:"/api/short-link/batch/generate",method:"post",data:e})));var Zt;const Jt="undefined"!=typeof window,Xt=()=>{};Jt&&(null==(Zt=null==window?void 0:window.navigator)?void 0:Zt.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);var en=Object.defineProperty,tn=Object.defineProperties,nn=Object.getOwnPropertyDescriptors,rn=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,ln=(e,t,n)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t)=>{for(var n in t||(t={}))an.call(t,n)&&ln(e,n,t[n]);if(rn){var r,o=a(rn(t));try{for(o.s();!(r=o.n()).done;){n=r.value;on.call(t,n)&&ln(e,n,t[n])}}catch(i){o.e(i)}finally{o.f()}}return e};const cn=Jt?window:void 0;function un(...e){var t;let n,a,o,i;if("string"==typeof e[0]?(a=e[0],o=e[1],i=e[2],n=cn):(t=r(e,4),n=t[0],a=t[1],o=t[2],i=t[3]),!n)return Xt;let l=Xt;const s=U((()=>function(e){var t;const n=q(e);return null!=(t=null==n?void 0:n.$el)?t:n}(n)),(e=>{l(),e&&(e.addEventListener(a,o,i),l=()=>{e.removeEventListener(a,o,i),l=Xt})}),{immediate:!0,flush:"post"}),c=()=>{s(),l()};var u;return u=c,J()&&X(u),c}const dn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pn="__vueuse_ssr_handlers__";dn[pn]=dn[pn]||{},dn[pn];var fn,hn,gn=Object.defineProperty,vn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,yn=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,xn=(e,t,n)=>t in e?gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(hn=fn||(fn={})).UP="UP",hn.RIGHT="RIGHT",hn.DOWN="DOWN",hn.LEFT="LEFT",hn.NONE="NONE";const kn=["a","s","d","w","q","e","A","S","D","W","Q","E","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Escape"," "];var Sn=g({name:"V3ImgPreview",props:{showToolbar:{type:Boolean,default:!0},showArrowBtn:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},url:{type:String,default:void 0},escClose:{type:Boolean,default:!0},images:{type:Array,default:()=>[]},showCloseBtn:{type:Boolean,default:!0},index:{type:Number,default:0},on_unmount_v3_ima_preview_app:{type:Function}},setup(e,t){let n=t.emit;const r=v(null),o=v(null),i=function(e,t={}){var n,r;const o=null!=(n=t.draggingElement)?n:cn,i=v(null!=(r=t.initialValue)?r:{x:0,y:0}),l=v(),s=e=>!t.pointerTypes||t.pointerTypes.includes(e.pointerType),c=e=>{q(t.preventDefault)&&e.preventDefault(),q(t.stopPropagation)&&e.stopPropagation()};return Jt&&(un(e,"pointerdown",(n=>{var r;if(!s(n))return;if(q(t.exact)&&n.target!==q(e))return;const a=q(e).getBoundingClientRect(),o={x:n.pageX-a.left,y:n.pageY-a.top};!1!==(null==(r=t.onStart)?void 0:r.call(t,o,n))&&(l.value=o,c(n))}),!0),un(o,"pointermove",(e=>{var n;s(e)&&l.value&&(i.value={x:e.pageX-l.value.x,y:e.pageY-l.value.y},null==(n=t.onMove)||n.call(t,i.value,e),c(e))}),!0),un(o,"pointerup",(e=>{var n;s(e)&&l.value&&(l.value=void 0,null==(n=t.onEnd)||n.call(t,i.value,e),c(e))}),!0)),u=((e,t)=>{for(var n in t||(t={}))bn.call(t,n)&&xn(e,n,t[n]);if(yn){var r,o=a(yn(t));try{for(o.s();!(r=o.n()).done;)n=r.value,wn.call(t,n)&&xn(e,n,t[n])}catch(i){o.e(i)}finally{o.f()}}return e})({},function(e){if(!Y(e))return K(e);const t=Array.isArray(e.value)?new Array(e.value.length):{};for(const n in e.value)t[n]=Q((()=>({get:()=>e.value[n],set(t){if(Array.isArray(e.value)){const r=[...e.value];r[n]=t,e.value=r}else{const a=(r=sn({},e.value),tn(r,nn({[n]:t})));Object.setPrototypeOf(a,e.value),e.value=a}var r}})));return t}(i)),d={position:i,isDragging:m((()=>!!l.value)),style:m((()=>`left:${i.value.x}px;top:${i.value.y}px;`))},vn(u,mn(d));var u,d}(o),l=i.style,s=V({visible:!0,imgState:"loading",src:"",imgIndex:e.index}),c=m((()=>{var t;return(null===(t=e.images)||void 0===t?void 0:t.length)>1&&e.showArrowBtn})),u=V({imgScale:1,imgRotate:0}),d=m((()=>{var t;return(null===(t=e.images)||void 0===t?void 0:t.length)>1})),p=function(e,t=200,n={}){return function(e,t){return function(...n){e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})}}(function(e,t={}){let n,r;return a=>{const o=q(e),i=q(t.maxWait);if(n&&clearTimeout(n),o<=0||void 0!==i&&i<=0)return r&&(clearTimeout(r),r=null),a();i&&!r&&(r=setTimeout((()=>{n&&clearTimeout(n),r=null,a()}),i)),n=setTimeout((()=>{r&&clearTimeout(r),r=null,a()}),o)}}(t,n),e)}((t=>{if(!e.keyboard)return!1;t.preventDefault();const n=t.key;return["s","S","ArrowDown"].includes(n)?g(-.1,!1):["w","W","ArrowUp"].includes(n)?g(.1,!1):" "===n?f():"Escape"===n&&e.escClose?x():["E","e"].includes(n)?h(!0):["Q","q"].includes(n)?h(!1):["a","A","ArrowLeft"].includes(n)?k(!1):["d","D","ArrowRight"].includes(n)?k(!0):void 0}),200);!function(e,t,n={}){const r=n.target,a=void 0===r?cn:r,o=n.eventName,i=void 0===o?"keydown":o,l=n.passive,s=void 0!==l&&l,c="function"==typeof(u=e)?u:"string"==typeof u?e=>e.key===u:Array.isArray(u)?e=>u.includes(e.key):u?()=>!0:()=>!1;var u;un(a,i,(e=>{c(e)&&t(e)}),s)}(kn,p);const f=()=>{u.imgScale=1,u.imgRotate=0,o.value.style.top="0",o.value.style.left="0"};function h(e){u.imgRotate+=90*(e?1:-1)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u.imgScale<=.2&&e<0||(t?u.imgScale=e:u.imgScale+=e)}function b(e){e.preventDefault(),g(e.deltaY<0?.05:-.05)}function w(e){s.imgState="loading",(e=>{const t=new Image;return t.src=e,new Promise(((n,r)=>{t.onload=()=>{n(e)},t.onerror=()=>{r(e)}}))})(e).then((()=>{s.imgState="success",s.src=e,f()})).catch((()=>{s.imgState="error"}))}function x(){var t;s.visible=!1,n("close"),null===(t=e.on_unmount_v3_ima_preview_app)||void 0===t||t.call(e)}function k(t){d.value&&(t?(s.imgIndex++,s.imgIndex>e.images.length-1&&(s.imgIndex=0)):(s.imgIndex--,s.imgIndex<0&&(s.imgIndex=e.images.length-1)),w(e.images[s.imgIndex]))}return y((()=>{window.__V3__IMG__PREVIEW__LOAD__ICON__SVG__||function(e){e.__V3__IMG__PREVIEW__LOAD__ICON__SVG__=!0;var t,n,r,a,o,i='<svg><symbol id="v3-img-close" viewBox="0 0 1045 1024"><path d="M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z"  ></path></symbol><symbol id="v3-img-img-error" viewBox="0 0 1024 1024"><path d="M704 328a72 72 0 1 0 144 0 72 72 0 1 0-144 0z"  ></path><path d="M999.904 116.608a32 32 0 0 0-21.952-10.912L521.76 73.792a31.552 31.552 0 0 0-27.2 11.904l-92.192 114.848a32 32 0 0 0 0.672 40.896l146.144 169.952-147.456 194.656 36.48-173.376a32 32 0 0 0-11.136-31.424L235.616 245.504l79.616-125.696a32 32 0 0 0-29.28-49.024L45.76 87.552a32 32 0 0 0-29.696 34.176l55.808 798.016a32.064 32.064 0 0 0 34.304 29.696l176.512-13.184c17.632-1.312 30.848-16.672 29.504-34.272s-16.576-31.04-34.304-29.536L133.44 883.232l-6.432-92.512 125.312-12.576a32 32 0 0 0 28.672-35.04 32.16 32.16 0 0 0-35.04-28.672L122.56 726.848 82.144 149.184l145.152-10.144-60.96 96.224a32 32 0 0 0 6.848 41.952l198.4 161.344-58.752 279.296a30.912 30.912 0 0 0 0.736 14.752 31.68 31.68 0 0 0 1.408 11.04l51.52 154.56a31.968 31.968 0 0 0 27.456 21.76l523.104 47.552a32.064 32.064 0 0 0 34.848-29.632l55.776-798.048a32.064 32.064 0 0 0-7.776-23.232z m-98.912 630.848l-412.576-39.648a31.52 31.52 0 0 0-34.912 28.768 32 32 0 0 0 28.8 34.912l414.24 39.808-6.272 89.536-469.728-42.72-39.584-118.72 234.816-310.016a31.936 31.936 0 0 0-1.248-40.192L468.896 219.84l65.088-81.056 407.584 28.48-40.576 580.192z"  ></path></symbol><symbol id="v3-img-loading" viewBox="0 0 1024 1024"><path d="M834.7648 736.3584a5.632 5.632 0 1 0 11.264 0 5.632 5.632 0 0 0-11.264 0z m-124.16 128.1024a11.1616 11.1616 0 1 0 22.3744 0 11.1616 11.1616 0 0 0-22.3744 0z m-167.3216 65.8944a16.7936 16.7936 0 1 0 33.6384 0 16.7936 16.7936 0 0 0-33.6384 0zM363.1616 921.6a22.3744 22.3744 0 1 0 44.7488 0 22.3744 22.3744 0 0 0-44.7488 0z m-159.744-82.0224a28.0064 28.0064 0 1 0 55.9616 0 28.0064 28.0064 0 0 0-56.0128 0zM92.672 700.16a33.6384 33.6384 0 1 0 67.2256 0 33.6384 33.6384 0 0 0-67.2256 0zM51.2 528.9984a39.168 39.168 0 1 0 78.336 0 39.168 39.168 0 0 0-78.336 0z m34.1504-170.0864a44.8 44.8 0 1 0 89.6 0 44.8 44.8 0 0 0-89.6 0zM187.904 221.7984a50.432 50.432 0 1 0 100.864 0 50.432 50.432 0 0 0-100.864 0zM338.432 143.36a55.9616 55.9616 0 1 0 111.9232 0 55.9616 55.9616 0 0 0-111.9744 0z m169.0112-4.9152a61.5936 61.5936 0 1 0 123.2384 0 61.5936 61.5936 0 0 0-123.2384 0z m154.7776 69.632a67.1744 67.1744 0 1 0 134.3488 0 67.1744 67.1744 0 0 0-134.3488 0z m110.0288 130.816a72.8064 72.8064 0 1 0 145.5616 0 72.8064 72.8064 0 0 0-145.5616 0z m43.7248 169.472a78.3872 78.3872 0 1 0 156.8256 0 78.3872 78.3872 0 0 0-156.8256 0z" fill="" ></path></symbol><symbol id="v3-img-right" viewBox="0 0 1024 1024"><path d="M884.808356 96.170317c0-17.780969-16.723893-32.209586-37.309744-32.209586-20.586874 0-37.310767 14.428617-37.310767 32.209586V927.20035c0 17.780969 16.723893 32.209586 37.310767 32.209586 20.585851 0 37.309744-14.428617 37.309744-32.209586V96.170317zM263.249101 159.859871c-27.619034-21.278629-50.027393-11.659551-50.027393 22.116717v659.490146c0 33.44881 22.481014 43.322691 50.027393 22.116716l407.352615-313.385476c27.65485-21.242813 27.618011-55.784514 0-76.989465L263.249101 159.859871z m449.327612 260.298398c60.265572 48.751331 60.301388 134.302799 0 183.090968L297.061185 939.297876c-70.976518 57.422827-158.459988-25.322735-158.459989-116.158556V200.267163c0-91.12644 87.445608-173.6172 158.459989-116.158557l415.515528 336.049663zM297.061185 84.10963"  ></path></symbol><symbol id="v3-img-left" viewBox="0 0 1024 1024"><path d="M138.60222 96.170317V927.20035c0 17.780969 16.723893 32.209586 37.309744 32.209586 20.586874 0 37.310767-14.428617 37.310767-32.209586V96.170317c0-17.780969-16.723893-32.209586-37.310767-32.209586-20.585851 0-37.309744 14.428617-37.309744 32.209586z m621.560278 63.689554L352.80886 473.208509c-27.618011 21.205974-27.65485 55.747675 0 76.989465l407.353638 313.385476c27.54638 21.205974 50.027393 11.33107 50.027393-22.116716v-659.490146c-0.001023-33.776268-22.408359-43.395346-50.027393-22.116717z m-33.812084-75.750241c71.013357-57.459666 158.458965 25.032116 158.458965 116.157533v622.872157c0 90.835821-87.482447 173.581384-158.459988 116.158556L310.834886 603.249237c-60.301388-48.78817-60.265572-134.339638 0-183.090968L726.350414 84.10963z m0 0"  ></path></symbol><symbol id="v3-img-zoom-out" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H336a32 32 0 0 0 0 64h289.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-zoom-big" viewBox="0 0 1024 1024"><path d="M919.264 905.984l-138.912-138.912C851.808 692.32 896 591.328 896 480c0-229.376-186.624-416-416-416S64 250.624 64 480s186.624 416 416 416c95.008 0 182.432-32.384 252.544-86.208l141.44 141.44a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0.032-45.248zM128 480C128 285.92 285.92 128 480 128s352 157.92 352 352-157.92 352-352 352S128 674.08 128 480z"  ></path><path d="M625.792 448H512v-112a32 32 0 0 0-64 0V448h-112a32 32 0 0 0 0 64H448v112a32 32 0 1 0 64 0V512h113.792a32 32 0 1 0 0-64z"  ></path></symbol><symbol id="v3-img-rotate-left" viewBox="0 0 1024 1024"><path d="M884.565333 431.914667c-3.114667 36.266667-22.784 55.893333-59.008 59.008-35.2-3.114667-54.357333-22.741333-57.472-59.008 3.114667-35.157333 22.272-54.314667 57.472-57.429334 36.224 3.114667 55.893333 22.272 59.008 57.429334z m-97.834666 0c3.114667 24.874667 16.042667 38.826667 38.826666 41.941333 22.741333-2.048 35.712-16.042667 38.826667-41.941333-3.114667-24.832-16.085333-38.272-38.826667-40.362667-22.784 3.114667-35.712 16.597333-38.826666 40.362667z m-59.008 82.346666c-1.024 103.466667-34.688 156.245333-100.906667 158.293334-69.376-1.024-104.021333-53.76-104.021333-158.293334 0.981333-104.576 35.157333-158.421333 102.442666-161.536 67.285333 2.133333 101.461333 55.893333 102.485334 161.493334z m-169.216 0c0 89.002667 22.229333 132.992 66.730666 131.925334 44.501333 1.066667 66.773333-42.922667 66.773334-131.968 0-90.026667-22.784-134.528-68.309334-133.546667-42.453333 3.114667-64.213333 47.658667-65.194666 133.546667z m-184.746667 49.664c-58.026667-5.205333-89.6-39.338667-94.72-102.485333 4.096-67.285333 37.76-103.509333 100.906667-108.714667 72.448-0.981333 108.16 50.218667 107.093333 153.728 0 109.738667-37.76 165.12-113.322667 166.144-45.568-2.090667-74.538667-24.32-86.954666-66.773333l32.597333-10.88c7.253333 36.266667 26.453333 53.845333 57.472 52.821333 48.64-2.090667 73.472-45.056 74.538667-128.853333-15.530667 29.994667-41.429333 45.013333-77.653334 45.013333z m3.072-181.674666c-39.338667 3.114667-60.586667 28.458667-63.658667 76.074666 2.048 47.616 23.296 72.96 63.658667 76.074667 40.362667 0 65.194667-18.645333 74.538667-55.893333 0-65.194667-24.874667-97.28-74.538667-96.256z m135.594667 641.578666C230.186667 1023.829333 0.597333 794.24 0.597333 512v-0.981333h53.973334v0.981333c0 252.501333 205.354667 457.898667 457.813333 457.898667 252.501333 0 457.898667-205.397333 457.898667-457.898667 0-252.458667-205.397333-457.813333-457.856-457.813333A457.088 457.088 0 0 0 159.530667 220.586667l120.533333-0.938667h8.106667l-47.061334 47.786667-167.936 1.365333-1.109333-167.936 47.189333-47.872v131.626667A510.933333 510.933333 0 0 1 512.426667 0.128C794.624 0.128 1024.256 229.76 1024.256 512c0 282.282667-229.632 511.872-511.829333 511.872z"  ></path></symbol><symbol id="v3-img-antetype" viewBox="0 0 1024 1024"><path d="M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zM512 622c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zM512 482c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"  ></path><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"  ></path><path d="M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"  ></path></symbol><symbol id="v3-img-rotate-right" viewBox="0 0 1024 1024"><path d="M375.381 562.517c-57.898-5.162-89.472-39.296-94.634-102.4 4.138-67.2 37.76-103.381 100.864-108.586 72.362-1.024 108.032 50.176 107.008 153.6 0 109.61-37.76 164.906-113.238 165.973-45.525-2.133-74.453-24.32-86.869-66.73l32.597-10.838c7.211 36.181 26.368 53.76 57.387 52.736 48.597-2.048 73.387-44.97 74.453-128.768-15.488 29.995-41.386 45.013-77.568 45.013z m3.115-181.504c-39.296 3.072-60.501 28.459-63.573 75.99 2.048 47.573 23.253 72.96 63.573 76.032 40.32 0 65.152-18.603 74.453-55.851 0-65.152-24.832-97.195-74.453-96.17z m145.835 131.84c0.981-104.448 35.114-158.208 102.4-161.322 67.157 2.09 101.29 55.85 102.357 161.322-1.067 103.424-34.688 156.16-100.821 158.251-69.334-1.067-103.936-53.76-103.936-158.25z m169.088 0c0-89.984-22.784-134.4-68.267-133.418-42.41 3.114-64.128 47.616-65.152 133.418 0 88.96 22.187 132.907 66.688 131.84 44.459 1.067 66.73-42.88 66.73-131.84z m75.989-82.218c3.115-35.158 22.23-54.272 57.387-57.387 36.181 3.115 55.893 22.23 58.965 57.387-3.115 36.224-22.784 55.893-58.965 58.965-35.158-3.115-54.272-22.741-57.387-58.965z m96.17 0c-3.071-24.832-16.042-38.23-38.783-40.32-22.742 3.114-35.67 16.554-38.784 40.32 3.114 24.832 16.042 38.826 38.826 41.898 22.699-2.048 35.67-16.042 38.742-41.898z m-354.175 592.64c-281.984 0-511.36-229.376-511.36-511.403C0 229.973 229.419 0.512 511.403 0.512c157.696 0 298.922 71.765 392.789 184.32V54.613l47.147 47.872-1.11 167.766-167.765-1.366-47.061-47.744h8.106l121.558 0.982a456.704 456.704 0 0 0-353.664-167.68c-252.246 0-457.43 205.226-457.43 457.429 0 252.288 205.184 457.515 457.43 457.515S968.875 764.16 968.875 511.872v-0.981h53.888v0.981c0 282.027-229.376 511.403-511.36 511.403z"  ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function s(){o||(o=!0,r())}t=function(){var e,t=document.createElement("div");t.innerHTML=i,i=null,(t=t.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",(e=document.body).firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(t,e.firstChild):e.appendChild(t))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(r=t,a=e.document,o=!1,function e(){try{a.documentElement.doScroll("left")}catch(t){return void setTimeout(e,50)}s()}(),a.onreadystatechange=function(){"complete"==a.readyState&&(a.onreadystatechange=null,s())})}("undefined"!=typeof window?window:global),Z((()=>{un(r.value,"mousewheel",b,!1),f(),Z((()=>void 0!==e.url?w(e.url):Array.isArray(e.images)&&e.images.length>0?w(e.images[s.imgIndex]):console.error("images is not Array or Array length is 0")))}))})),Object.assign(Object.assign(Object.assign({vImagesWrap:r,imgContainer:o},K(s)),K(u)),{handleClose:x,toggleImg:k,initImgSize:f,dragStyle:l,handleScale:g,handleRotate:h,visibleArrowBtn:c,isMultiple:d,handleClickMaskClose:function(e){e.target.classList.contains("img-container")&&x()}})}});const Cn=e=>(W("data-v-50804152"),e=e(),G(),e),En={class:"icon img-loading rotate-animation","aria-hidden":"true"},An=[Cn((()=>E("use",{"xlink:href":"#v3-img-loading"},null,-1)))],Ln=["src"],On=[Cn((()=>E("use",{"xlink:href":"#v3-img-img-error"},null,-1)))],Tn=[Cn((()=>E("use",{"xlink:href":"#v3-img-close"},null,-1)))],_n=[Cn((()=>E("svg",{class:"icon","aria-hidden":"true"},[E("use",{"xlink:href":"#v3-img-left"})],-1)))],zn=[Cn((()=>E("svg",{class:"icon","aria-hidden":"true"},[E("use",{"xlink:href":"#v3-img-right"})],-1)))],jn={key:3,class:"v3-img-preview-toolbar"},Pn=[Cn((()=>E("use",{"xlink:href":"#v3-img-zoom-out"},null,-1)))],Mn=[Cn((()=>E("use",{"xlink:href":"#v3-img-zoom-big"},null,-1)))],In=[Cn((()=>E("use",{"xlink:href":"#v3-img-antetype"},null,-1)))],Rn=[Cn((()=>E("use",{"xlink:href":"#v3-img-rotate-left"},null,-1)))],Dn=[Cn((()=>E("use",{"xlink:href":"#v3-img-rotate-right"},null,-1)))];!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".icon[data-v-50804152] {\n  width: 1em;\n  height: 1em;\n  vertical-align: -0.15em;\n  fill: currentColor;\n  overflow: hidden;\n}\n.v-images-wrap[data-v-50804152] {\n  z-index: 200;\n  user-select: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  background: rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(3px);\n  color: #fff;\n}\n.v-images-wrap[data-v-50804152] .img-loading[data-v-50804152],\n.v-images-wrap[data-v-50804152] .img-content[data-v-50804152] {\n  font-size: 50px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  transition: all 0.2s;\n  cursor: move;\n}\n.v-images-wrap[data-v-50804152] .img-container[data-v-50804152] {\n  z-index: 201;\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  top: 0;\n  left: 0;\n  text-align: center;\n}\n.v-images-wrap[data-v-50804152] .img-container[data-v-50804152] .img-content[data-v-50804152] {\n  max-width: 100%;\n  max-height: 100%;\n}\n.v-images-wrap[data-v-50804152] .img-container[data-v-50804152] .img-error[data-v-50804152] {\n  font-size: 300px;\n  color: #d8d8d8;\n}\n.v-images-wrap[data-v-50804152] .rotate-animation[data-v-50804152] {\n  animation: rotate-50804152 1.5s linear infinite;\n}\n.v-images-wrap[data-v-50804152] .arrow[data-v-50804152] {\n  width: 42px;\n  height: 42px;\n  text-align: center;\n  line-height: 42px;\n  position: absolute;\n  top: 50%;\n  border-radius: 50%;\n  transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  font-size: 24px;\n  cursor: pointer;\n  transition: all 0.2s;\n  z-index: 280;\n  background: rgba(0, 0, 0, 0.3);\n}\n.v-images-wrap[data-v-50804152] .arrow[data-v-50804152][data-v-50804152]:hover {\n  opacity: 0.8;\n  transform: translateY(-50%) scale(1.2);\n}\n.v-images-wrap[data-v-50804152] .arrow-left[data-v-50804152] {\n  left: 50px;\n}\n.v-images-wrap[data-v-50804152] .arrow-right[data-v-50804152] {\n  right: 50px;\n}\n.v-images-wrap[data-v-50804152] .close-btn[data-v-50804152] {\n  z-index: 205;\n  position: absolute;\n  right: 50px;\n  top: 50px;\n  width: 36px;\n  height: 36px;\n  font-size: 22px;\n  line-height: 36px;\n  text-align: center;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: #e7e5e5;\n  background: rgba(0, 0, 0, 0.3);\n}\n.v-images-wrap[data-v-50804152] .close-btn[data-v-50804152][data-v-50804152]:hover {\n  opacity: 0.8;\n  transform: scale(1.2);\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] {\n  z-index: 205;\n  position: absolute;\n  bottom: 10%;\n  font-size: 26px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  cursor: pointer;\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] section[data-v-50804152] {\n  height: 44px;\n  bottom: 10%;\n  padding: 0 22px;\n  display: flex;\n  align-items: center;\n  border-radius: 22px;\n  background: rgba(0, 0, 0, 0.3);\n  color: #c3c3c3;\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] section[data-v-50804152] svg[data-v-50804152] {\n  box-sizing: content-box;\n  padding: 0 10px;\n  transition: all 0.2s;\n}\n.v-images-wrap[data-v-50804152] .v3-img-preview-toolbar[data-v-50804152] section[data-v-50804152] svg[data-v-50804152][data-v-50804152]:hover {\n  transform: scale(1.2);\n}\n@keyframes rotate-50804152 {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n"),Sn.render=function(e,t,n,r,a,o){return w(),x(R,{name:"fade"},{default:k((()=>[e.visible?(w(),j("div",{key:0,class:"v-images-wrap",onClick:t[10]||(t[10]=function(){return e.handleClickMaskClose&&e.handleClickMaskClose(...arguments)}),ref:"vImagesWrap"},[S((w(),j("svg",En,An,512)),[[C,"loading"===e.imgState]]),E("div",{ref:"imgContainer",style:_(e.dragStyle),class:"img-container"},[S(E("img",{class:"img-content",onDragstart:t[0]||(t[0]=M((()=>{}),["prevent"])),src:e.src,style:_(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`),alt:""},null,44,Ln),[[C,"success"===e.imgState]]),S((w(),j("svg",{class:"icon img-content img-error",onDragstart:t[1]||(t[1]=M((()=>{}),["prevent"])),"aria-hidden":"true",style:_(`transform: scale(${e.imgScale}) rotate(${e.imgRotate}deg);`)},On,36)),[[C,"error"===e.imgState]])],4),e.showCloseBtn?(w(),j("svg",{key:0,class:"icon close-btn","aria-hidden":"true",onClick:t[2]||(t[2]=M((function(){return e.handleClose&&e.handleClose(...arguments)}),["stop"]))},Tn)):O("",!0),e.visibleArrowBtn?(w(),j("div",{key:1,class:"arrow arrow-left",onClick:t[3]||(t[3]=t=>e.toggleImg(!1))},_n)):O("",!0),e.visibleArrowBtn?(w(),j("div",{key:2,class:"arrow arrow-right",onClick:t[4]||(t[4]=t=>e.toggleImg(!0))},zn)):O("",!0),e.showToolbar?(w(),j("div",jn,[E("section",null,[(w(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[5]||(t[5]=t=>e.handleScale(-.1,!1))},Pn)),(w(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[6]||(t[6]=t=>e.handleScale(.1,!1))},Mn)),(w(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[7]||(t[7]=function(){return e.initImgSize&&e.initImgSize(...arguments)})},In)),(w(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[8]||(t[8]=t=>e.handleRotate(!1))},Rn)),(w(),j("svg",{class:"icon","aria-hidden":"true",onClick:t[9]||(t[9]=t=>e.handleRotate(!0))},Dn))])])):O("",!0)],512)):O("",!0)])),_:1})},Sn.__scopeId="data-v-50804152";let Bn={};const Fn="v3-img-preview-container-id";let Nn={};function $n(e){if(Nn._instance)return!1;Array.isArray(e)&&(e={images:e}),"string"==typeof e&&(e={url:e}),e=Object.assign(Object.assign({},Bn),e);let t=document.getElementById(Fn);return t||(t=document.createElement("div"),t.id=Fn,document.body.appendChild(t)),Nn=H(Sn,Object.assign(Object.assign({},e),{on_unmount_v3_ima_preview_app:()=>Nn.unmount()})),Nn.mount(t),Nn}(()=>{const e=Sn;e.install=(e,t)=>{Bn=t,e.config.globalProperties.$v3ImgPreviewFn=$n}})();let Un=ee(),Vn=Ne(),Kn=v(!1),Wn=v(!1),Gn=v(!1),Hn=v(!1),qn=v(!1);function Yn(){return{openVideo:()=>{Kn.value=!0},dialogVideoVisible:Kn,openText:()=>{Wn.value=!0},dialogTextVisible:Wn,openOffice:()=>{Gn.value=!0},dialogOfficeVisible:Gn,openImage:e=>{let t=[],n=0;"only"===Un.zfileConfig.imagePreview.mode?t.push(e.url):Vn.filterFileByType("image").forEach(((r,a)=>{e.name===r.name&&(n=a),t.push(r.url)})),$n({images:t,index:n})},openAudio:()=>{Vn.updateAudioList(Vn.filterFileByType("audio"))},openPdf:()=>{Hn.value=!0},dialogPdfVisible:Hn,open3d:()=>{qn.value=!0},dialog3dVisible:qn}}const Qn=Me().encodeAllIgnoreSlashes;let Zn=$(),Jn=Zn.routerRef,Xn=Zn.fullpath,er=Zn.storageKey,tr=Zn.currentPath,nr=Vt(),rr=nr.getPathPwd,ar=nr.putPathPwd;const or=Qe().storageListAsFileList;let ir=Ne(),lr=Fe();const sr=u(lr.globalConfig.siteName);let cr=ee();const ur=Yn(),dr=ur.openAudio,pr=ur.openImage,fr=ur.openOffice,hr=ur.openPdf,gr=ur.openText,vr=ur.openVideo,mr=v(!1),yr=v(!1);let br=V([]);if(0===br.length)for(let e=0;e<cr.zfileConfig.skeleton.size;e++)br.push({});let wr=V({path:"",password:"",orderBy:"",orderDirection:""});const xr=v(!1);let kr=De(),Sr=kr.selectRows,Cr=kr.clearSelection;function Er(){const e=e=>{if(!er.value)return;mr.value=!0,wr.path=tr.value;let t=e||{};t.storageKey=er.value,t.path=tr.value,t.password=t.password||rr(),t.orderBy=wr.orderBy,t.orderDirection=wr.orderDirection;let n=er.value;var a;(a=t,l({url:"/api/storage/files",method:"post",data:a,config:{showDefaultMsg:!1}})).then((e=>{let r=e.data.passwordPattern;if(ar(r,t.password),n!==er.value)return;let a=e.data.files,o=wr.path;if(""!==o&&"/"!==o){let e=Qt.basename(Qt.resolve(tr.value,"../"));a.unshift({name:e||"/",path:Qt.resolve(o,"../"),type:"BACK"})}ir.updateFileList(a),mr.value=!1,yr.value=!0,Sr.value=[],Xn.value?sr.value=lr.globalConfig.siteName+" | "+Xn.value[Xn.value.length-1]:sr.value=lr.globalConfig.siteName+" | 首页"})).catch((e=>{let t=e.response.data;t.code===re.responseCode.INVALID_PASSWORD?(d.warning("密码错误，请重新输入！"),r()):t.code===re.responseCode.REQUIRED_PASSWORD?(d.warning("此文件夹需要密码，请输入密码！"),r()):d.error(t.msg)}))};let t=m((()=>{let e=cr.zfileConfig.skeleton.enable,t=cr.zfileConfig.skeleton.show;return!!e&&(("always"===t||!yr.value)&&mr.value)})),n=m((()=>!t.value&&mr.value)),r=()=>{ae.prompt("此文件夹已加密，请输入密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password",inputValidator:e=>!!e,inputErrorMessage:"密码不能为空."}).then((({value:t})=>{e({password:t})})).catch((()=>{if("/"!==wr.path&&""!==wr.path||!0!==lr.globalConfig.rootShowStorage){let e=Qt.resolve(wr.path,"../");Jn.value.push("/"+er.value+e)}else ir.updateFileList(or.value),Jn.value.push("/"),sr.value=lr.globalConfig.siteName+" | 首页",mr.value=!1}))};return{loadFile:e,openRow:e=>{if(e.name)if(ir.updateCurrentClickRow(e),"FILE"===e.type){const t=Br().batchDownloadFile;switch(e.fileType){case"video":vr();break;case"image":pr(e);break;case"text":gr();break;case"audio":dr(e);break;case"office":fr(e);break;case"pdf":hr(e);break;case"three3d":open3d(e);break;default:t(e)}Cr()}else if("ROOT"===e.type)Jn.value.push(e.path);else if("BACK"===e.type){let t=Je("/"+er.value+"/"+e.path);t=Qn(t),Jn.value.push(t)}else{let t=Je("/"+er.value+"/"+e.path+"/"+e.name);t=Qn(t),Jn.value.push(t)}},searchParam:wr,sortChangeMethod:({prop:t,order:n})=>{wr.orderBy=t,wr.orderDirection="descending"===n?"desc":"asc",e()},skeletonLoading:t,skeletonData:br,basicLoading:n,initStorageConfig:xr,loadFileConfig:()=>{let e={storageKey:er.value,path:tr.value};var t;(t=e,l({url:"/api/site/config/storage",method:"post",data:t})).then((e=>{lr.updateFolderConfig(e.data),er.value!==ir.oldStorageKey&&ir.updateOldStorageKey(er.value)})).finally((()=>{xr.value=!0}))}}}let Ar=Ne(),Lr=Fe(),Or=$(),Tr=Or.storageKey,_r=Or.currentPath,zr=De(),jr=zr.selectRows,Pr=zr.selectRow,Mr=zr.selectFolders,Ir=zr.selectFiles,Rr=Vt().getPathPwd;const Dr=te();function Br(){const e=Er().loadFile,t=e=>{window.open(e)},n=e=>{const t=document.createElement("iframe");t.style.display="none",t.style.height=0,t.src=e,document.body.appendChild(t),setTimeout((()=>{t.remove()}),3e5)};return{batchDownloadFile:e=>{var r;if(!jr.value&&0===jr.value.length)return void d.warning("请至少选择一个文件");let a;const o=(()=>{let e={isChrome:!1,tips:""},t=Dr.browser,n=Dr.version;return"Chrome"===t?e.isChrome=!0:e.tips=`<br><span class="text-gray-500 text-xs">检测到当前浏览器为 <b>${t}-${n}</b>, 可能不支持此功能，建议使用谷歌浏览器!</span>`,e})();null!==(r=e)&&void 0!==r&&r.name?a=`是否确认下载文件 <span class="text-blue-500">${e.name}</span> ？`:1===jr.value.length?(a=`是否确认下载文件 <span class="text-blue-500">${jr.value[0].name}</span> ？`,e=jr.value[0]):jr.value.length>1&&(a=`是否确认批量下载 ${jr.value.length} 个文件？`,o.isChrome||(a+=o.tips)),ae.confirm(a,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"info",callback:r=>{var a;"confirm"===r&&(null!==(a=e)&&void 0!==a&&a.name?(console.log("进行指定文件下载, 文件:",e),t(e.url)):jr.value.forEach((e=>{"FILE"===e.type&&(console.log("批量选中文件下载, 文件:",e),n(e.url))})))}})},rename:()=>{let t=Pr.value;null!==t?ae.prompt(`将 <b>${t.name}</b> 修改为：`,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.name,inputValidator:e=>!!e,inputErrorMessage:"模板名称不能为空."}).then((({value:n})=>{let r,a={storageKey:Tr.value,path:t.path,name:t.name,newName:n};"FILE"===t.type?r=Wt:"FOLDER"===t.type&&(r=Gt);const o=oe.service({fullscreen:!0,text:"重命名中...",background:"rgba(255, 255, 255, 0.6)"});r(a).then((()=>{d.success("重命名成功")})).finally((()=>{o.close(),e()}))})):d.warning("请先选中一个文件或文件夹！")},newFolder:()=>{ae.prompt(`在 <b>${_r.value}</b> 下创建文件夹，请输入要创建的文件夹名称`,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",draggable:!0,inputValidator:e=>e?!e.includes("/")||"文件夹名称不能包含 /":"文件夹名称不能为空"}).then((({value:t})=>{let n={storageKey:Tr.value,path:_r.value,name:t};var r;(r=n,r.password=Kt(r.path),l({url:"/api/file/operator/mkdir",method:"post",data:r})).then((()=>{d.success("创建成功")})).finally((()=>{e()}))}))},moveTo:()=>{d.warning("暂未实现")},copyTo:()=>{d.warning("暂未实现")},batchDelete:()=>{if(!Lr.permission.delete)return;if(0===jr.value.length)return void d.warning("请先至少选中一个文件或文件夹！");let t=1===jr.value.length?"是否确认删除 ":"是否确认批量删除 ";Mr.value.length>0&&(t+=" "+Mr.value.length+" 个文件夹"),Mr.value.length>0&&Ir.value.length>0&&(t+="，"),Ir.value.length>0&&(t+=Ir.value.length+" 个文件"),Mr.value.length>0&&["s3","tencent","aliyun","qiniu","minio","huawei","upyun"].includes(Ar.currentStorageSource.type.key)&&(t+=" (不支持删除非空文件夹)"),t+="?",ae.confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",draggable:!0,callback:t=>{if("confirm"===t){let t={storageKey:Tr.value,deleteItems:[]};jr.value.forEach((e=>{t.deleteItems.push({path:e.path,name:e.name,type:e.type,password:Rr(e.path)})}));const r=oe.service({text:"删除中...",background:"rgba(0, 0, 0, .3)"});(n=t,l({url:"/api/file/operator/delete/batch",method:"post",data:n})).then((t=>{d.success(t.msg),e()})).finally((()=>{r.close()}))}var n}})}}}ee();let Fr=Fe(),Nr=Ne();const $r=p("Meta"),Ur=p("Control"),Vr=p("Shift");let Kr=m((()=>$r.value||Ur.value)),Wr=Br().batchDelete;const Gr=Er(),Hr=Gr.skeletonLoading,qr=Gr.openRow,Yr=De(),Qr=Yr.selectRows,Zr=Yr.selectRow,Jr=Yr.clearSelection,Xr=Yr.toggleRowSelection,ea=Yr.toggleAllSelection;window.addEventListener("keydown",(function(e){if("Escape"===e.key&&ta())Jr();else if("a"===e.key&&(e.metaKey||e.ctrlKey)&&ta())e.preventDefault(),ea();else if("Delete"===e.key&&ta()){var t;Wr&&(null==Qr||null===(t=Qr.value)||void 0===t?void 0:t.length)>0&&(e.preventDefault(),Wr())}else"Backspace"===e.key&&ta()&&Nr.fileList.length>0&&"BACK"===Nr.fileList[0].type&&la(Nr.fileList[0])}),!1);const ta=()=>na()&&!1===ra(),na=()=>document.querySelector(".zfile-index-body:hover"),ra=()=>!!document.querySelector(".el-popup-parent--hidden"),aa=v(-1),oa=v(-1),ia=f().pressed;let la;U((()=>ia.value),((e,t)=>{!1===e&&!0===t&&(aa.value=-1,oa.value=-1)}));let sa=Ne(),ca=Fe(),ua=v(!1),da=!1;const pa=v(!1),fa=v(""),ha=V([]),ga=V([]),va=new Map,ma=new Map;let ya=0;const ba={error:1,uploading:2,waiting:3,finished:4}}}}))}();
