var qe=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Ee=(a,l,s)=>l in a?qe(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,Q=(a,l)=>{for(var s in l||(l={}))Ze.call(l,s)&&Ee(a,s,l[s]);if(Ie)for(var s of Ie(l))Ge.call(l,s)&&Ee(a,s,l[s]);return a},ze=(a,l)=>Xe(a,Ye(l));var $=(a,l,s)=>new Promise((o,d)=>{var c=i=>{try{b(s.next(i))}catch(y){d(y)}},u=i=>{try{b(s.throw(i))}catch(y){d(y)}},b=i=>i.done?o(i.value):Promise.resolve(i.value).then(c,u);b((s=s.apply(a,l)).next())});import{c as f,a0 as Te,r as A,m as ee,d as Je,ay as Qe,G as et,s as te,w as ae,Z as N,o as tt,an as at,x as ot,Q as st,R as nt,a as p,f as x,k as m,F as oe,n as h,u as t,g as W,p as V,b as w,e as B,q as U,z as se,h as lt,j as rt,N as it,t as _,i as ut,a9 as ke}from"./index.9f622a37.js";import{m as dt,d as ct}from"./request.b205aa07.js";import{av as pt,I as Pe,b as ft,J as vt,d as ne,L as $e,aw as mt,a3 as yt,a4 as ht,q as bt,u as Ne,ax as gt,ay as xt,az as wt,k as St,o as Ve,E as R,g as Ct,_ as It,A as Et,w as zt}from"./base.130d3d79.js";import{U as le}from"./event.776e7e11.js";const kt=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),Pt=["class","style"],$t=/^on[A-Z]/,Nt=(a={})=>{const{excludeListeners:l=!1,excludeKeys:s}=a,o=f(()=>((s==null?void 0:s.value)||[]).concat(Pt)),d=Te();return d?f(()=>{var c;return pt(Object.entries((c=d.proxy)==null?void 0:c.$attrs).filter(([u])=>!o.value.includes(u)&&!(l&&$t.test(u))))}):f(()=>({}))};function Vt(a){const l=A();function s(){if(a.value==null)return;const{selectionStart:d,selectionEnd:c,value:u}=a.value;if(d==null||c==null)return;const b=u.slice(0,Math.max(0,d)),i=u.slice(Math.max(0,c));l.value={selectionStart:d,selectionEnd:c,value:u,beforeTxt:b,afterTxt:i}}function o(){if(a.value==null||l.value==null)return;const{value:d}=a.value,{beforeTxt:c,afterTxt:u,selectionStart:b}=l.value;if(c==null||u==null||b==null)return;let i=d.length;if(d.endsWith(u))i=d.length-u.length;else if(d.startsWith(c))i=c.length;else{const y=c[b-1],S=d.indexOf(y,b-1);S!==-1&&(i=S+1)}a.value.setSelectionRange(i,i)}return[s,o]}let g;const At=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Tt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Ft(a){const l=window.getComputedStyle(a),s=l.getPropertyValue("box-sizing"),o=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),d=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Tt.map(u=>`${u}:${l.getPropertyValue(u)}`).join(";"),paddingSize:o,borderSize:d,boxSizing:s}}function Ae(a,l=1,s){var o;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:d,borderSize:c,boxSizing:u,contextStyle:b}=Ft(a);g.setAttribute("style",`${b};${At}`),g.value=a.value||a.placeholder||"";let i=g.scrollHeight;const y={};u==="border-box"?i=i+c:u==="content-box"&&(i=i-d),g.value="";const S=g.scrollHeight-d;if(Pe(l)){let v=S*l;u==="border-box"&&(v=v+d+c),i=Math.max(v,i),y.minHeight=`${v}px`}if(Pe(s)){let v=S*s;u==="border-box"&&(v=v+d+c),i=Math.min(v,i)}return y.height=`${i}px`,(o=g.parentNode)==null||o.removeChild(g),g=void 0,y}const Mt=ft({id:{type:String,default:void 0},size:vt,disabled:Boolean,modelValue:{type:ne([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ne([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:$e,default:""},prefixIcon:{type:$e,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ne([Object,Array,String]),default:()=>dt({})}}),Lt={[le]:a=>ee(a),input:a=>ee(a),change:a=>ee(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Bt=["role"],Rt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Ot=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Dt={name:"ElInput",inheritAttrs:!1},Ht=Je(ze(Q({},Dt),{props:Mt,emits:Lt,setup(a,{expose:l,emit:s}){const o=a,d={suffix:"append",prefix:"prepend"},c=Te(),u=Qe(),b=et(),i=f(()=>{const e={};return o.containerRole==="combobox"&&(e["aria-haspopup"]=u["aria-haspopup"],e["aria-owns"]=u["aria-owns"],e["aria-expanded"]=u["aria-expanded"]),e}),y=Nt({excludeKeys:f(()=>Object.keys(i.value))}),{form:S,formItem:v}=mt(),{inputId:re}=yt(o,{formItemContext:v}),Fe=ht(),z=bt(),n=Ne("input"),ie=Ne("textarea"),O=te(),k=te(),T=A(!1),q=A(!1),F=A(!1),D=A(!1),ue=A(),X=te(o.inputStyle),M=f(()=>O.value||k.value),de=f(()=>{var e;return(e=S==null?void 0:S.statusIcon)!=null?e:!1}),L=f(()=>(v==null?void 0:v.validateState)||""),ce=f(()=>L.value&&gt[L.value]),Me=f(()=>D.value?xt:wt),Le=f(()=>[u.style,o.inputStyle]),pe=f(()=>[o.inputStyle,X.value,{resize:o.resize}]),C=f(()=>St(o.modelValue)?"":String(o.modelValue)),H=f(()=>o.clearable&&!z.value&&!o.readonly&&!!C.value&&(T.value||q.value)),Y=f(()=>o.showPassword&&!z.value&&!o.readonly&&!!C.value&&(!!C.value||T.value)),P=f(()=>o.showWordLimit&&!!y.value.maxlength&&(o.type==="text"||o.type==="textarea")&&!z.value&&!o.readonly&&!o.showPassword),Z=f(()=>Array.from(C.value).length),Be=f(()=>!!P.value&&Z.value>Number(y.value.maxlength)),Re=f(()=>!!b.suffix||!!o.suffixIcon||H.value||o.showPassword||P.value||!!L.value&&de.value),[Oe,De]=Vt(O);ct(k,e=>{if(!P.value||o.resize!=="both")return;const r=e[0],{width:I}=r.contentRect;ue.value={right:`calc(100% - ${I+15+6}px)`}});const j=()=>{const{type:e,autosize:r}=o;if(!(!Et||e!=="textarea"))if(r){const I=ke(r)?r.minRows:void 0,E=ke(r)?r.maxRows:void 0;X.value=Q({},Ae(k.value,I,E))}else X.value={minHeight:Ae(k.value).minHeight}},K=()=>{const e=M.value;!e||e.value===C.value||(e.value=C.value)},fe=e=>{const{el:r}=c.vnode;if(!r)return;const E=Array.from(r.querySelectorAll(`.${n.e(e)}`)).find(_e=>_e.parentNode===r);if(!E)return;const Ce=d[e];b[Ce]?E.style.transform=`translateX(${e==="suffix"?"-":""}${r.querySelector(`.${n.be("group",Ce)}`).offsetWidth}px)`:E.removeAttribute("style")},G=()=>{fe("prefix"),fe("suffix")},J=e=>$(this,null,function*(){Oe();let{value:r}=e.target;o.formatter&&(r=o.parser?o.parser(r):r,r=o.formatter(r)),!F.value&&r!==C.value&&(s(le,r),s("input",r),yield N(),K(),De())}),ve=e=>{s("change",e.target.value)},me=e=>{s("compositionstart",e),F.value=!0},ye=e=>{var r;s("compositionupdate",e);const I=(r=e.target)==null?void 0:r.value,E=I[I.length-1]||"";F.value=!kt(E)},he=e=>{s("compositionend",e),F.value&&(F.value=!1,J(e))},He=()=>{D.value=!D.value,be()},be=()=>$(this,null,function*(){var e;yield N(),(e=M.value)==null||e.focus()}),je=()=>{var e;return(e=M.value)==null?void 0:e.blur()},ge=e=>{T.value=!0,s("focus",e)},xe=e=>{var r;T.value=!1,s("blur",e),o.validateEvent&&((r=v==null?void 0:v.validate)==null||r.call(v,"blur").catch(I=>Ve()))},Ke=e=>{q.value=!1,s("mouseleave",e)},We=e=>{q.value=!0,s("mouseenter",e)},we=e=>{s("keydown",e)},Ue=()=>{var e;(e=M.value)==null||e.select()},Se=()=>{s(le,""),s("change",""),s("clear"),s("input","")};return ae(()=>o.modelValue,()=>{var e;N(()=>j()),o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(r=>Ve()))}),ae(C,()=>K()),ae(()=>o.type,()=>$(this,null,function*(){yield N(),K(),j(),G()})),tt(()=>$(this,null,function*(){!o.formatter&&o.parser,K(),G(),yield N(),j()})),at(()=>$(this,null,function*(){yield N(),G()})),l({input:O,textarea:k,ref:M,textareaStyle:pe,autosize:ot(o,"autosize"),focus:be,blur:je,select:Ue,clear:Se,resizeTextarea:j}),(e,r)=>st((p(),x("div",se(t(i),{class:[e.type==="textarea"?t(ie).b():t(n).b(),t(n).m(t(Fe)),t(n).is("disabled",t(z)),t(n).is("exceed",t(Be)),{[t(n).b("group")]:e.$slots.prepend||e.$slots.append,[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend,[t(n).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(n).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(n).bm("suffix","password-clear")]:t(H)&&t(Y)},e.$attrs.class],style:t(Le),role:e.containerRole,onMouseenter:We,onMouseleave:Ke}),[m(" input "),e.type!=="textarea"?(p(),x(oe,{key:0},[m(" prepend slot "),e.$slots.prepend?(p(),x("div",{key:0,class:h(t(n).be("group","prepend"))},[W(e.$slots,"prepend")],2)):m("v-if",!0),V("div",{class:h([t(n).e("wrapper"),t(n).is("focus",T.value)])},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),x("span",{key:0,class:h(t(n).e("prefix"))},[V("span",{class:h(t(n).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(p(),w(t(R),{key:0,class:h(t(n).e("icon"))},{default:B(()=>[(p(),w(U(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),V("input",se({id:t(re),ref_key:"input",ref:O,class:t(n).e("inner")},t(y),{type:e.showPassword?D.value?"text":"password":e.type,disabled:t(z),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:me,onCompositionupdate:ye,onCompositionend:he,onInput:J,onFocus:ge,onBlur:xe,onChange:ve,onKeydown:we}),null,16,Rt),m(" suffix slot "),t(Re)?(p(),x("span",{key:1,class:h(t(n).e("suffix"))},[V("span",{class:h(t(n).e("suffix-inner"))},[!t(H)||!t(Y)||!t(P)?(p(),x(oe,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(p(),w(t(R),{key:0,class:h(t(n).e("icon"))},{default:B(()=>[(p(),w(U(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(H)?(p(),w(t(R),{key:1,class:h([t(n).e("icon"),t(n).e("clear")]),onMousedown:rt(t(it),["prevent"]),onClick:Se},{default:B(()=>[lt(t(Ct))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(Y)?(p(),w(t(R),{key:2,class:h([t(n).e("icon"),t(n).e("password")]),onClick:He},{default:B(()=>[(p(),w(U(t(Me))))]),_:1},8,["class"])):m("v-if",!0),t(P)?(p(),x("span",{key:3,class:h(t(n).e("count"))},[V("span",{class:h(t(n).e("count-inner"))},_(t(Z))+" / "+_(t(y).maxlength),3)],2)):m("v-if",!0),t(L)&&t(ce)&&t(de)?(p(),w(t(R),{key:4,class:h([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(L)==="validating")])},{default:B(()=>[(p(),w(U(t(ce))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(p(),x("div",{key:1,class:h(t(n).be("group","append"))},[W(e.$slots,"append")],2)):m("v-if",!0)],64)):(p(),x(oe,{key:1},[m(" textarea "),V("textarea",se({id:t(re),ref_key:"textarea",ref:k,class:t(ie).e("inner")},t(y),{tabindex:e.tabindex,disabled:t(z),readonly:e.readonly,autocomplete:e.autocomplete,style:t(pe),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:me,onCompositionupdate:ye,onCompositionend:he,onInput:J,onFocus:ge,onBlur:xe,onChange:ve,onKeydown:we}),null,16,Ot),t(P)?(p(),x("span",{key:0,style:ut(ue.value),class:h(t(n).e("count"))},_(t(Z))+" / "+_(t(y).maxlength),7)):m("v-if",!0)],64))],16,Bt)),[[nt,e.type!=="hidden"]])}}));var jt=It(Ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Xt=zt(jt);export{Xt as E,kt as i,Nt as u};
