!function(){var e=document.createElement("style");e.innerHTML=".expression-item[data-v-1c3d44e3] .el-input__wrapper{width:100%}@media (min-width: 640px){.expression-item[data-v-1c3d44e3] .el-input__wrapper{width:6rem}}@media (min-width: 768px){.expression-item[data-v-1c3d44e3] .el-input__wrapper{width:9rem}}@media (min-width: 1024px){.expression-item[data-v-1c3d44e3] .el-input__wrapper{width:12rem}}@media (min-width: 1280px){.expression-item[data-v-1c3d44e3] .el-input__wrapper{width:16rem}}.zfile-admin-readme-form[data-v-1c3d44e3] .z-form-sub-title{max-width:100%}.zfile-admin-readme-form .rules-tips[data-v-1c3d44e3]{padding:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}.zfile-admin-readme-form .rules-tips-link[data-v-1c3d44e3]{margin-top:.5rem}.zfile-admin-readme-form .rules-tips-link[data-v-1c3d44e3]>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-readme-form .rules-tips-link svg[data-v-1c3d44e3]{height:1rem;line-height:1.25rem;vertical-align:text-bottom}\n",document.head.appendChild(e),System.register(["./index-legacy.2de5676a.js","./base-legacy.f53a0713.js","./loading-legacy.36861a78.js","./button-legacy.9af9d3a6.js","./input-legacy.1469b40d.js","./tag-legacy.b431dc88.js","./select-legacy.b88550b2.js","./scrollbar-legacy.6b3fe021.js","./popper-legacy.606262a9.js","./alert-legacy.9053bd89.js","./tooltip-legacy.f5af8fcd.js","./switch-legacy.8d49ebdd.js","./SvgIcon-legacy.ed92c0b9.js","./ZFormItem-legacy.ee097f08.js","./admin-storage-legacy.72800729.js","./common-legacy.ded915fb.js","./sortable.esm-legacy.a574004a.js","./request-legacy.e2497089.js","./index-legacy.c7b26f61.js","./readme-editor-dialog-legacy.f4f8f1a5.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./BadgeCheckIcon-legacy.0ba87333.js","./index-legacy.bb28c642.js","./directive-legacy.1ac5dcca.js","./index-legacy.5aa4688d.js","./index-legacy.2e60e22c.js","./index-legacy.66af6ab6.js","./event-legacy.39ad8904.js","./scroll-legacy.20579f08.js","./isEqual-legacy.3ff08c6c.js","./debounce-legacy.0c6126e2.js","./validator-legacy.21431d38.js","./focus-trap-legacy.e6bab6c4.js","./event-legacy.0bfbd831.js","./index-legacy.61ab75a6.js","./index-legacy.b9e82fd1.js","./dialog-legacy.d7539d6b.js","./overlay-legacy.ee415700.js","./refs-legacy.66da65c2.js"],(function(e){"use strict";var a,l,t,n,i,d,c,o,s,r,u,m,p,f,g,v,y,b,x,h,j,w,_,k,V,I,E,U,z,C,R,T,q,S,D,L,M,B,F,G,Z,H,J,P,Q,W,A,K,N,O;return{setters:[function(e){a=e.r,l=e.L,t=e.P,n=e.o,i=e.ai,d=e.Q,c=e.u,o=e.a,s=e.b,r=e.e,u=e.p,m=e.h,p=e.t,f=e.S,g=e.f,v=e.y,y=e.F,b=e.k,x=e.U,h=e.V,j=e.J},function(e){w=e.b3,_=e.b4,k=e.l,V=e.m,I=e.aR,E=e.r},function(){},function(){},function(){},function(){},function(e){U=e.E,z=e.a},function(){},function(e){C=e.E},function(e){R=e.E},function(){},function(e){T=e.E},function(e){q=e._},function(e){S=e.Z,D=e.a},function(e){L=e.o,M=e.p,B=e.e,F=e.q},function(e){G=e.u,Z=e.r},function(e){H=e.S},function(e){J=e.E},function(e){P=e.E},function(e){Q=e.default},function(e){W=e.b},function(e){A=e._},function(e){K=e.r},function(e){N=e.E},function(e){O=e.v},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){let X=a([]),Y=a(!1);function $(e,a){let l=a.params.storageId;const t=()=>{const e=document.querySelector(".z-form-body");H.create(e,{draggable:".expression-item",filter:".el-button, .editor-input",onEnd:e=>{if(e.oldIndex===e.newIndex)return;const a=X.value.splice(e.oldIndex-1,1)[0];X.value.splice(e.newIndex-1,0,a)}})},n=()=>{X.value.push({description:"表达式 - "+(X.value.length+1),expression:"",readmeText:"",displayMode:"top",storageId:l})};return{loading:Y,loadReadmeData:()=>{L(l).then((e=>{X.value=e.data,0===X.value.length&&n(),t()}))},readmeList:X,addReadmeItem:n,deleteReadmeItem:e=>{X.value.splice(e,1)},saveReadmeData:()=>{if(!X.value.find((e=>{if(G.isEmpty(e.description)||G.isEmpty(e.expression)||G.isEmpty(e.readmeText))return J.warning("请检查数据填写是否完整"),!0}))){Y.value=!0;for(let e=0;e<X.value.length;e++){X.value[e].id=e+1}M(l,X.value).then((()=>{P.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:a=>{"confirm"===a&&e.push("/admin/storage-list")}})})).finally((()=>{Y.value=!1}))}}}}const ee=e=>(x("data-v-1c3d44e3"),e=e(),h(),e),ae={class:"flex justify-between"},le=ee((()=>u("span",{class:"mr-4 text-sm text-gray-500"},"兼容为读取 readme.md",-1))),te=ee((()=>u("div",{class:"rules-tips"},"Glob 表达式规则：",-1))),ne=ee((()=>u("div",{class:"rules-tips"},[u("b",null,"/"),j(": 根目录, 如 "),u("span",{class:"code select-all"},"/"),j(" 表示根路径下会加载此文档显示.")],-1))),ie=ee((()=>u("div",{class:"rules-tips"},[u("b",null,"*"),j("：单级路径通配符，如表达式 "),u("span",{class:"code select-all"},"/*"),j(" 表示根路径下的直接子文件夹会加载此文档显示.")],-1))),de=ee((()=>u("div",{class:"rules-tips"},[u("b",null,"**"),j("：多级路径通配符，如表达式 "),u("span",{class:"code select-all"},"/music/**"),j(" 表示 /music 文件夹及以下所有文件夹都会加载此文档.")],-1))),ce=ee((()=>u("div",{class:"rules-tips"},"注：系统匹配到第一个符合的规则就会取文档进行显示，所以请调整好规则顺序，下方规则可进行拖拽排序。",-1))),oe={class:"rules-tips-link"},se={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},re=ee((()=>u("span",null,"参考文章 (Wikipedia)",-1))),ue={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},me=j("参考文章 (阮一峰)"),pe={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},fe=j("参考文章 (Github)"),ge={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},ve=j("添加更多"),ye=j("保存设置"),be={__name:"[storageId]",setup(e){let x=l(),h=t(),j=x.params.storageId;const L=$(h,x),M=L.loading,G=L.loadReadmeData,H=L.readmeList,P=L.addReadmeItem,W=L.deleteReadmeItem,A=L.saveReadmeData;n((()=>{G(),Y()}));const X=a(),Y=()=>{B(j).then((e=>{e.data.type=e.data.type.key,X.value=e.data}))};let ee=a(!1);B(x.params.storageId).then((e=>{ee.value=e.data.compatibilityReadme||!1}));const be=()=>{F(x.params.storageId,ee.value).then((e=>{J.success("保存成功")}))};let xe=a({}),he=a(!1);return(e,a)=>{const l=q,t=i("router-link"),n=T,x=C,h=R,j=N,L=U,B=z,F=E,G=O;return d((o(),s(D,{model:c(H),class:"zfile-admin-readme-form"},{"form-title":r((()=>{var e;return[u("div",ae,[u("div",null,[m(t,{to:"/admin/storage-list"},{default:r((()=>[m(l,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})])),_:1}),u("span",null,"目录文档（"+p(null===(e=X.value)||void 0===e?void 0:e.name)+"）",1)]),m(x,{placement:"top",content:"启用后下发的规则设置会失效，仅会为读取目录下的 readme.md 文件来渲染文档, 且固定在底部显示."},{default:r((()=>[u("div",null,[le,m(n,{onChange:be,"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:c(ee),"onUpdate:modelValue":a[0]||(a[0]=e=>f(ee)?ee.value=e:ee=e)},null,8,["modelValue"])])])),_:1})])]})),"form-sub-title":r((()=>[m(h,{closable:!1,type:"info"},{default:r((()=>[te,ne,ie,de,ce,u("div",oe,[u("a",se,[m(c(w),{class:"inline mr-1"}),re]),u("a",ue,[m(c(w),{class:"inline mr-1"}),me]),u("a",pe,[m(c(w),{class:"inline mr-1"}),fe])])])),_:1})])),footer:r((()=>[m(F,{type:"primary",size:"default",icon:c(K),onClick:c(A)},{default:r((()=>[ye])),_:1},8,["icon","onClick"])])),default:r((()=>[(o(!0),g(y,null,v(c(H),((e,a)=>(o(),s(S,{required:!0,key:e,class:"expression-item"},{default:r((()=>[u("div",ge,[m(x,{content:"此处可填写表达书描述，用于辅助记忆，防止时间过长后不知道表达式含义.",placement:"top"},{default:r((()=>[m(j,{"prefix-icon":c(_),placeholder:"请输入表达式描述",modelValue:e.description,"onUpdate:modelValue":a=>e.description=a},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])])),_:2},1024),m(j,{"prefix-icon":c(Z),placeholder:"请输入表达式",modelValue:e.expression,"onUpdate:modelValue":a=>e.expression=a},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),m(j,{class:"editor-input",onClick:a=>{return l=e,he.value=!0,void(xe.value=l);var l},readonly:"","prefix-icon":c(k),placeholder:"请点击编辑文档",modelValue:e.readmeText,"onUpdate:modelValue":a=>e.readmeText=a},null,8,["onClick","prefix-icon","modelValue","onUpdate:modelValue"]),m(B,{class:"editor-input",modelValue:e.displayMode,"onUpdate:modelValue":a=>e.displayMode=a},{default:r((()=>[m(L,{label:"顶部显示",value:"top"}),m(L,{label:"底部显示",value:"bottom"}),m(L,{label:"弹窗显示",value:"dialog"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),m(F,{type:"danger",onClick:e=>c(W)(a),icon:c(V)},null,8,["onClick","icon"])])])),_:2},1024)))),128)),m(S,null,{default:r((()=>[m(F,{type:"primary",size:"default",icon:c(I),onClick:c(P)},{default:r((()=>[ve])),_:1},8,["icon","onClick"])])),_:1}),c(he)?(o(),s(Q,{key:0,modelValue:c(xe).readmeText,"onUpdate:modelValue":a[1]||(a[1]=e=>c(xe).readmeText=e),visible:c(he),"onUpdate:visible":a[2]||(a[2]=e=>f(he)?he.value=e:he=e)},null,8,["modelValue","visible"])):b("",!0)])),_:1},8,["model"])),[[G,c(M)]])}}};"function"==typeof W&&W(be);e("default",A(be,[["__scopeId","data-v-1c3d44e3"]]))}}}))}();
