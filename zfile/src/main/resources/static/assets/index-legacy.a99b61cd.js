!function(){var e=document.createElement("style");e.innerHTML=".el-button[data-v-7666d571],.el-input[data-v-7666d571] input{height:35px}\n",document.head.appendChild(e),System.register(["./base-legacy.f53a0713.js","./loading-legacy.36861a78.js","./ZFormItem-legacy.ee097f08.js","./input-legacy.1469b40d.js","./tooltip-legacy.f5af8fcd.js","./popper-legacy.606262a9.js","./image-viewer-legacy.690d8063.js","./button-legacy.9af9d3a6.js","./radio-legacy.7c8e5e97.js","./switch-legacy.8d49ebdd.js","./admin-setting-legacy.ac753087.js","./index-legacy.2de5676a.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./request-legacy.e2497089.js","./index-legacy.c7b26f61.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.bb28c642.js","./directive-legacy.1ac5dcca.js","./index-legacy.61ab75a6.js","./focus-trap-legacy.e6bab6c4.js","./event-legacy.0bfbd831.js","./index-legacy.66af6ab6.js","./debounce-legacy.0c6126e2.js","./scroll-legacy.20579f08.js","./event-legacy.39ad8904.js","./validator-legacy.21431d38.js","./index-legacy.b9e82fd1.js"],(function(e){"use strict";var n,l,a,o,t,i,c,d,u,f,r,s,y,g,m,v,p,b,V,j,k,_,h,C,M,x,A,w,S,B,E,F,T,U,L;return{setters:[function(e){n=e.b2,l=e.r},function(){},function(e){a=e.Z,o=e.a},function(){},function(){},function(e){t=e.E},function(e){i=e.E},function(){},function(e){c=e.E},function(e){d=e.E},function(e){u=e.g,f=e.v,r=e.l,s=e.d},function(e){y=e.r,g=e.aA,m=e.w,v=e.u,p=e.Q,b=e.a,V=e.b,j=e.e,k=e.h,_=e.I,h=e.f,C=e.k,M=e.J,x=e.U,A=e.V,w=e.p},function(e){S=e.t},function(e){B=e.E},function(e){E=e.E},function(e){F=e.b},function(e){T=e._},function(e){U=e.E},function(e){L=e.v},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const I=y({});function D(){const e=g(r,{formatResult:e=>e.data}),n=e.data,l=e.reload,a=g(s,{manual:!0,onSuccess(){B({message:"保存成功",type:"success"})}}),o=a.loading,t=a.run,i=()=>{u().then((e=>{I.value=e.data}))};return{data:n,reload:l,saveData:()=>{t(n.value)},saveLoading:o,load2FAInfo:i,twoFAData:I,copyTwoFASecret:()=>{S(I.value.secret).then((()=>{B.success("复制成功")}))},verifyCodeAndBind:()=>{f(I.value).then((e=>{B.success("绑定成功"),l()}))},rebind:()=>{n.value.loginVerifySecret="",i()},cancelBind:()=>{E.confirm("是否确认取消绑定，确认后将自动恢复为图形验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:e=>{"confirm"===e&&(n.value.loginVerifySecret="",n.value.loginVerifyMode="image")}})},validBind:()=>{E.prompt("请输入双因素认证 APP 中的验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:e=>!!e,inputErrorMessage:"验证码不能为空."}).then((({value:e})=>{let l={secret:n.value.loginVerifySecret,code:e};f(l).then((()=>{B.success("验证成功")}))}))}}}const z=e=>(x("data-v-7666d571"),e=e(),A(),e),q=M(" 安全设置 "),P=M(" 此处设置可保护您的站点安全 "),Z=M(" 启用后，会在门户显示后台登录入口，请根据自身情况选择是否启用 "),G=M("不启用登录验证"),H=M("启用图片验证码"),J=M("启用双因素认证"),Q=M(" 图片验证码也可能会被识别，不能完全抵挡暴力破解。 "),R=M(" 双因素认证可完美保护登录认证，可使用任意支持 2FA 认证的软件，如 "),K=z((()=>w("b",null,"Google 身份验证器",-1))),N=M("、"),O=z((()=>w("b",null,"Microsoft Authenticator",-1))),W=M(" 等软件. "),X=z((()=>w("br",null,null,-1))),Y={key:0,class:"w-full"},$=M("重新绑定"),ee=M("取消绑定"),ne=M("验证绑定"),le={key:1},ae=M(" 可扫描上方二维码或复制下方密钥到支持双因素认证的软件中添加。 "),oe=M("验证并绑定"),te=M(" 请绑定双因素认证软件后，输入显示的验证码进行绑定 "),ie={__name:"index",setup(e){const u=D(),f=u.data,r=u.saveData,s=u.saveLoading,y=u.load2FAInfo,g=u.twoFAData,M=u.copyTwoFASecret,x=u.verifyCodeAndBind,A=u.rebind,w=u.cancelBind,S=u.validBind;return m((()=>{var e;return null===(e=f.value)||void 0===e?void 0:e.loginVerifyMode}),((e,n)=>{"off"!==e&&"image"!==e||!n||r(),"2fa"!==e||f.value.loginVerifySecret||y()})),m((()=>{var e;return null===(e=f.value)||void 0===e?void 0:e.showLogin}),((e,n)=>{e!==n&&void 0!==n&&r()})),(e,u)=>{const r=d,m=a,B=c,E=l,F=i,T=t,I=U,D=o,z=L;return v(f)?p((b(),V(D,{key:0,model:v(f)},{"form-title":j((()=>[q])),"form-sub-title":j((()=>[P])),default:j((()=>[k(m,{label:"是否显示登录入口"},{tips:j((()=>[Z])),default:j((()=>[k(r,{modelValue:v(f).showLogin,"onUpdate:modelValue":u[0]||(u[0]=e=>v(f).showLogin=e)},null,8,["modelValue"])])),_:1}),k(m,{label:"登录验证方式"},_({default:j((()=>[k(B,{modelValue:v(f).loginVerifyMode,"onUpdate:modelValue":u[1]||(u[1]=e=>v(f).loginVerifyMode=e),label:"off"},{default:j((()=>[G])),_:1},8,["modelValue"]),k(B,{modelValue:v(f).loginVerifyMode,"onUpdate:modelValue":u[2]||(u[2]=e=>v(f).loginVerifyMode=e),label:"image"},{default:j((()=>[H])),_:1},8,["modelValue"]),k(B,{modelValue:v(f).loginVerifyMode,"onUpdate:modelValue":u[3]||(u[3]=e=>v(f).loginVerifyMode=e),label:"2fa"},{default:j((()=>[J])),_:1},8,["modelValue"])])),_:2},["image"===v(f).loginVerifyMode?{name:"tips",fn:j((()=>[Q]))}:void 0,"2fa"===v(f).loginVerifyMode?{name:"tips",fn:j((()=>[R,K,N,O,W,X]))}:void 0]),1024),"2fa"===v(f).loginVerifyMode?(b(),V(m,{key:0,label:"双因素认证密钥"},_({default:j((()=>{var e;return[v(f).loginVerifySecret?(b(),h("div",Y,[k(E,{size:"small",type:"primary",onClick:v(A)},{default:j((()=>[$])),_:1},8,["onClick"]),k(E,{size:"small",type:"primary",onClick:v(w)},{default:j((()=>[ee])),_:1},8,["onClick"]),k(E,{size:"small",type:"primary",onClick:v(S)},{default:j((()=>[ne])),_:1},8,["onClick"])])):(b(),h("div",le,[k(F,{onClick:v(y),src:null===(e=v(g))||void 0===e?void 0:e.qrcode},null,8,["onClick","src"]),k(I,{readonly:"",modelValue:v(g).secret,"onUpdate:modelValue":u[4]||(u[4]=e=>v(g).secret=e)},{append:j((()=>[k(T,{class:"item",effect:"dark",content:"复制",placement:"bottom"},{default:j((()=>[k(E,{onClick:v(M),icon:v(n)},null,8,["onClick","icon"])])),_:1})])),_:1},8,["modelValue"])]))]})),_:2},[v(f).loginVerifySecret?void 0:{name:"tips",fn:j((()=>[ae]))}]),1024)):C("",!0),"2fa"!==v(f).loginVerifyMode||v(f).loginVerifySecret?C("",!0):(b(),V(m,{key:1,label:"双因素认证验证码"},{tips:j((()=>[te])),default:j((()=>[k(I,{modelValue:v(g).code,"onUpdate:modelValue":u[5]||(u[5]=e=>v(g).code=e)},null,8,["modelValue"]),k(E,{onClick:v(x),type:"primary"},{default:j((()=>[oe])),_:1},8,["onClick"])])),_:1}))])),_:1},8,["model"])),[[z,v(s)]]):C("",!0)}}};"function"==typeof F&&F(ie);e("default",T(ie,[["__scopeId","data-v-7666d571"]]))}}}))}();
