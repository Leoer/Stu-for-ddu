!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-397bd5eb] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-397bd5eb] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-397bd5eb] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./index-legacy.2de5676a.js","./base-legacy.f53a0713.js","./card-legacy.ff894b08.js","./zh-cn-legacy.4118f518.js","./input-legacy.1469b40d.js","./tag-legacy.b431dc88.js","./select-legacy.b88550b2.js","./scrollbar-legacy.6b3fe021.js","./popper-legacy.606262a9.js","./checkbox-legacy.ff46eded.js","./tooltip-legacy.f5af8fcd.js","./popover-legacy.0804fd9b.js","./SvgIcon-legacy.ed92c0b9.js","./table-column-legacy.a41d2135.js","./form-item-legacy.e1f67f4b.js","./button-legacy.9af9d3a6.js","./switch-legacy.8d49ebdd.js","./useLinkSetting-legacy.455d3ea0.js","./admin-storage-legacy.72800729.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./admin-setting-legacy.ac753087.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./request-legacy.e2497089.js","./index-legacy.c7b26f61.js","./index-legacy.bb28c642.js","./dayjs.min-legacy.75bb2251.js","./index-legacy.66af6ab6.js","./index-legacy.5aa4688d.js","./index-legacy.886e1b44.js","./event-legacy.0bfbd831.js","./debounce-legacy.0c6126e2.js","./isEqual-legacy.3ff08c6c.js","./index-legacy.2e60e22c.js","./event-legacy.39ad8904.js","./scroll-legacy.20579f08.js","./validator-legacy.21431d38.js","./focus-trap-legacy.e6bab6c4.js","./index-legacy.61ab75a6.js","./index-legacy.b9e82fd1.js"],(function(e){"use strict";var a,l,t,n,o,d,i,c,u,r,s,f,p,g,y,m,b,h,v,w,j,_,x,V,k,C,U,z,E,K,A,D,S,T,L,F,R,Y,H,I,M,q,$,J,N,P,W,B;return{setters:[function(e){a=e.W,l=e.r,t=e.o,n=e.a,o=e.f,d=e.h,i=e.e,c=e.p,u=e.u,r=e.k,s=e.S,f=e.F,p=e.y,g=e.b,y=e.t,m=e.U,b=e.V,h=e.J},function(e){v=e.aS,w=e.m,j=e.r},function(e){_=e.E},function(e){x=e.E,V=e.a,k=e.b,C=e.c,U=e.z,z=e.f,E=e.h,K=e.i},function(){},function(){},function(e){A=e.E,D=e.a},function(){},function(e){S=e.E},function(e){T=e.E,L=e.a},function(){},function(){},function(e){F=e._},function(){},function(e){R=e.E,Y=e.a},function(){},function(e){H=e.E},function(e){I=e.u},function(e){M=e.l},function(e){q=e.t},function(e){$=e.l},function(e){J=e.b},function(e){N=e._},function(e){P=e.E},function(e){W=e.E},function(e){B=e.E},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const G=e=>(m("data-v-397bd5eb"),e=e(),b(),e),O={class:"zfile-admin-down-link"},Q={class:"flex justify-between"},X=G((()=>c("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 直链日志 ",-1))),Z={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},ee=G((()=>c("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1))),ae={class:"mt-4"},le={class:"flex justify-between space-x-20"},te={class:"text-gray-400"},ne=h("查询"),oe=h("批量删除"),de={class:"space-x-2"},ie=h("删除"),ce={__name:"log",setup(e){const m=I(),b=m.data,h=m.saveData,J=(m.saveLoading,a({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),N=e=>{J.limit=e,J.page=1,ue()},G=e=>{J.page=e,ue()},ce=l(),ue=()=>{J.date instanceof Array?(J.dateFrom=J.date[0],J.dateTo=J.date[1]):(J.dateFrom="",J.dateTo=""),z(J).then((e=>{ce.value=e.data,J.total=e.dataCount}))};t((()=>{ue(),pe(),se()}));const re=l(),se=()=>{$().then((e=>{re.value=e.data}))},fe=l(),pe=()=>{M().then((e=>{fe.value=e.data}))},ge=l(),ye=()=>{let e=ge.value.getSelectionRows();0!==e.length?W.confirm("是否确认删除？","提示",{type:"warning"}).then((()=>{let a=e.map((e=>e.id));K({ids:a}).then((e=>{P.success("删除成功"),ue()}))})):P.warning("请至少选择一条数据")};let me=e=>{q(e).then((()=>{P.success("复制成功")}))},be=e=>{window.open(`${re.value.domain}/s/${e}`)};return(e,a)=>{const l=H,t=A,m=D,z=R,K=B,I=x,M=j,q=Y,$=T,W=S,re=F,se=V,pe=L,he=k,ve=C,we=_;return n(),o("div",O,[d(we,null,{default:i((()=>[c("div",Q,[X,u(b)?(n(),o("div",Z,[ee,d(l,{onChange:u(h),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:u(b).recordDownloadLog,"onUpdate:modelValue":a[0]||(a[0]=e=>u(b).recordDownloadLog=e)},null,8,["onChange","modelValue"])])):r("",!0)]),c("div",ae,[d(q,{inline:"",modelValue:J,"onUpdate:modelValue":a[8]||(a[8]=e=>s(J)?J.value=e:null)},{default:i((()=>[d(z,{label:"存储源"},{default:i((()=>[d(m,{clearable:"",teleported:!1,modelValue:J.storageKey,"onUpdate:modelValue":a[1]||(a[1]=e=>J.storageKey=e)},{default:i((()=>[(n(!0),o(f,null,p(fe.value,(e=>(n(),g(t,{key:e.id,label:e.name,value:e.key},{default:i((()=>[c("div",le,[c("span",null,y(e.name),1),c("span",te,y(e.type.description),1)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(z,{label:"短链 Key"},{default:i((()=>[d(K,{modelValue:J.shortKey,"onUpdate:modelValue":a[2]||(a[2]=e=>J.shortKey=e)},null,8,["modelValue"])])),_:1}),d(z,{label:"文件名"},{default:i((()=>[d(K,{modelValue:J.path,"onUpdate:modelValue":a[3]||(a[3]=e=>J.path=e)},null,8,["modelValue"])])),_:1}),d(z,{label:"请求 IP"},{default:i((()=>[d(K,{modelValue:J.ip,"onUpdate:modelValue":a[4]||(a[4]=e=>J.ip=e)},null,8,["modelValue"])])),_:1}),d(z,{label:"UserAgent"},{default:i((()=>[d(K,{modelValue:J.userAgent,"onUpdate:modelValue":a[5]||(a[5]=e=>J.userAgent=e)},null,8,["modelValue"])])),_:1}),d(z,{label:"Referer"},{default:i((()=>[d(K,{modelValue:J.referer,"onUpdate:modelValue":a[6]||(a[6]=e=>J.referer=e)},null,8,["modelValue"])])),_:1}),d(z,{label:"创建时间"},{default:i((()=>[d(I,{modelValue:J.date,"onUpdate:modelValue":a[7]||(a[7]=e=>J.date=e),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])])),_:1}),d(z,null,{default:i((()=>[d(M,{type:"primary",icon:u(v),onClick:ue},{default:i((()=>[ne])),_:1},8,["icon"])])),_:1})])),_:1},8,["modelValue"]),c("div",null,[d(M,{onClick:ye,icon:u(w),type:"danger"},{default:i((()=>[oe])),_:1},8,["icon"])]),d(pe,{ref_key:"linkTableRef",ref:ge,size:"large",data:ce.value},{default:i((()=>[d($,{type:"selection",width:"55"}),d($,{width:"120",label:"存储源名称"},{default:i((e=>{var a;return[d(W,{content:null===(a=e.row.storageType)||void 0===a?void 0:a.description,placement:"right"},{default:i((()=>[c("span",null,y(e.row.storageName),1)])),_:2},1032,["content"])]})),_:1}),d($,{"show-tooltip-when-overflow":"",prop:"shortKey",label:"短链 key"},{default:i((e=>[c("div",de,[c("span",null,y(e.row.shortKey),1),d(re,{onClick:a=>u(me)(e.row.shortKey),class:"inline cursor-pointer",name:"copy"},null,8,["onClick"]),d(re,{onClick:a=>u(be)(e.row.shortKey),class:"inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])])),_:1}),d($,{"show-tooltip-when-overflow":"",prop:"path",label:"路径"}),d($,{width:"100","show-tooltip-when-overflow":"",prop:"ip",label:"请求 ip"}),d($,{width:"180","show-tooltip-when-overflow":"",prop:"userAgent",label:"UserAgent"}),d($,{width:"150","show-tooltip-when-overflow":"",prop:"referer",label:"Referer"}),d($,{width:"180",prop:"createTime",label:"创建时间"}),d($,{width:"120",label:"操作"},{default:i((e=>[d(se,{title:"是否确认删除?",onConfirm:a=>{return l=e.row.id,void E(l).then((e=>{P.success("删除成功"),ue()}));var l}},{reference:i((()=>[d(M,{icon:u(w),type:"danger"},{default:i((()=>[ie])),_:1},8,["icon"])])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),d(ve,{locale:u(U)},{default:i((()=>[d(he,{class:"mt-3","page-size":J.limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:G,onSizeChange:N,"current-page":J.page,"onUpdate:current-page":a[9]||(a[9]=e=>J.page=e),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:J.total},null,8,["page-size","current-page","total"])])),_:1},8,["locale"])])])),_:1})])}}};"function"==typeof J&&J(ce);e("default",N(ce,[["__scopeId","data-v-397bd5eb"]]))}}}))}();
