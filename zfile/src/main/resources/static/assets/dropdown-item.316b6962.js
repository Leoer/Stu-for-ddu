var Ie=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var se=(e,o,r)=>o in e?Ie(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,L=(e,o)=>{for(var r in o||(o={}))ye.call(o,r)&&se(e,r,o[r]);if(ae)for(var r of ae(o))Ee.call(o,r)&&se(e,r,o[r]);return e};import{b as Ce,d as X,O as h,_ as B,X as pe,r as ue,E as ce,a6 as Te,u as ee,a0 as Fe,a4 as ke,w as $e,j as me}from"./base.130d3d79.js";import{E as Re,O as Oe}from"./popper.5fa9a149.js";import{E as Se}from"./index.36d84cab.js";import{c as Pe,E as De,d as Ne,a as fe,C as Ke,b as ze,e as Me,f as Be,g as Ge,F as Ae,L as Le}from"./dropdown.08e13f27.js";import{a as Ue,o as He,c as S,w as de}from"./event.3ec63147.js";import{d as G,r as E,E as y,c as T,v as J,a3 as Ye,x as U,u as C,w as Ve,o as Je,H as je,g as D,ai as b,a as P,b as A,e as v,h as R,A as We,aB as qe,Z as Xe,a0 as ve,f as j,I as Ze,z as H,n as Q,k as x,p as Qe,q as xe,F as eo,i as oo}from"./index.9f622a37.js";import{u as no}from"./index.0cd3ee2d.js";import{c as we}from"./refs.dab41f4c.js";import{F as ro}from"./focus-trap.fe9e3ce7.js";const to=Ce({style:{type:X([String,Array,Object])},currentTabId:{type:X(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:X(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:lo,ElCollectionItem:ao,COLLECTION_INJECTION_KEY:oe,COLLECTION_ITEM_INJECTION_KEY:so}=Pe("RovingFocusGroup"),ne=Symbol("elRovingFocusGroup"),ge=Symbol("elRovingFocusGroupItem"),io={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},po=(e,o)=>{if(o!=="rtl")return e;switch(e){case h.right:return h.left;case h.left:return h.right;default:return e}},uo=(e,o,r)=>{const t=po(e.key,r);if(!(o==="vertical"&&[h.left,h.right].includes(t))&&!(o==="horizontal"&&[h.up,h.down].includes(t)))return io[t]},co=(e,o)=>e.map((r,t)=>e[(t+o)%e.length]),re=e=>{const{activeElement:o}=document;for(const r of e)if(r===o||(r.focus(),o!==document.activeElement))return},ie="currentTabIdChange",Z="rovingFocusGroup.entryFocus",mo={bubbles:!1,cancelable:!0},fo=G({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:to,emits:[ie,"entryFocus"],setup(e,{emit:o}){var r;const t=E((r=e.currentTabId||e.defaultCurrentTabId)!=null?r:null),i=E(!1),u=E(!1),l=E(null),{getItems:a}=y(oe,void 0),c=T(()=>[{outline:"none"},e.style]),w=s=>{o(ie,s)},g=()=>{i.value=!0},_=S(s=>{var m;(m=e.onMousedown)==null||m.call(e,s)},()=>{u.value=!0}),I=S(s=>{var m;(m=e.onFocus)==null||m.call(e,s)},s=>{const m=!C(u),{target:N,currentTarget:F}=s;if(N===F&&m&&!C(i)){const K=new Event(Z,mo);if(F==null||F.dispatchEvent(K),!K.defaultPrevented){const f=a().filter($=>$.focusable),O=f.find($=>$.active),k=f.find($=>$.id===C(t)),M=[O,k,...f].filter(Boolean).map($=>$.ref);re(M)}}u.value=!1}),n=S(s=>{var m;(m=e.onBlur)==null||m.call(e,s)},()=>{i.value=!1}),d=(...s)=>{o("entryFocus",...s)};J(ne,{currentTabbedId:Ye(t),loop:U(e,"loop"),tabIndex:T(()=>C(i)?-1:0),rovingFocusGroupRef:l,rovingFocusGroupRootStyle:c,orientation:U(e,"orientation"),dir:U(e,"dir"),onItemFocus:w,onItemShiftTab:g,onBlur:n,onFocus:I,onMousedown:_}),Ve(()=>e.currentTabId,s=>{t.value=s!=null?s:null}),Je(()=>{const s=C(l);Ue(s,Z,d)}),je(()=>{const s=C(l);He(s,Z,d)})}});function vo(e,o,r,t,i,u){return D(e.$slots,"default")}var wo=B(fo,[["render",vo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const go=G({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:lo,ElRovingFocusGroupImpl:wo}});function bo(e,o,r,t,i,u){const l=b("el-roving-focus-group-impl"),a=b("el-focus-group-collection");return P(),A(a,null,{default:v(()=>[R(l,We(qe(e.$attrs)),{default:v(()=>[D(e.$slots,"default")]),_:3},16)]),_:3})}var _o=B(go,[["render",bo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const ho=G({components:{ElRovingFocusCollectionItem:ao},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:r,loop:t,onItemFocus:i,onItemShiftTab:u}=y(ne,void 0),{getItems:l}=y(oe,void 0),a=pe(),c=E(null),w=S(n=>{o("mousedown",n)},n=>{e.focusable?i(C(a)):n.preventDefault()}),g=S(n=>{o("focus",n)},()=>{i(C(a))}),_=S(n=>{o("keydown",n)},n=>{const{key:d,shiftKey:s,target:m,currentTarget:N}=n;if(d===h.tab&&s){u();return}if(m!==N)return;const F=uo(n);if(F){n.preventDefault();let f=l().filter(O=>O.focusable).map(O=>O.ref);switch(F){case"last":{f.reverse();break}case"prev":case"next":{F==="prev"&&f.reverse();const O=f.indexOf(N);f=t.value?co(f,O+1):f.slice(O+1);break}}Xe(()=>{re(f)})}}),I=T(()=>r.value===C(a));return J(ge,{rovingFocusGroupItemRef:c,tabIndex:T(()=>C(I)?0:-1),handleMousedown:w,handleFocus:g,handleKeydown:_}),{id:a,handleKeydown:_,handleFocus:g,handleMousedown:w}}});function Io(e,o,r,t,i,u){const l=b("el-roving-focus-collection-item");return P(),A(l,{id:e.id,focusable:e.focusable,active:e.active},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var yo=B(ho,[["render",Io],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const W=Symbol("elDropdown"),{ButtonGroup:Eo}=ue,Co=G({name:"ElDropdown",components:{ElButton:ue,ElButtonGroup:Eo,ElScrollbar:Se,ElDropdownCollection:De,ElTooltip:Re,ElRovingFocusGroup:_o,ElOnlyChild:Oe,ElIcon:ce,ArrowDown:Te},props:Ne,emits:["visible-change","click","command"],setup(e,{emit:o}){const r=ve(),t=ee("dropdown"),{t:i}=no(),u=E(),l=E(),a=E(null),c=E(null),w=E(null),g=E(null),_=E(!1),I=[h.enter,h.space,h.down],n=T(()=>({maxHeight:Fe(e.maxHeight)})),d=T(()=>[t.m(f.value)]),s=pe().value,m=T(()=>e.id||s);function N(){F()}function F(){var p;(p=a.value)==null||p.onClose()}function K(){var p;(p=a.value)==null||p.onOpen()}const f=ke();function O(...p){o("command",...p)}function k(){}function z(){const p=C(c);p==null||p.focus(),g.value=null}function M(p){g.value=p}function $(p){_.value||(p.preventDefault(),p.stopImmediatePropagation())}function te(p){(p==null?void 0:p.type)==="keydown"&&c.value.focus(),o("visible-change",!0)}function Y(){o("visible-change",!1)}return J(W,{contentRef:c,role:T(()=>e.role),triggerId:m,isUsingKeyboard:_,onItemEnter:k,onItemLeave:z}),J("elDropdown",{instance:r,dropdownSize:f,handleClick:N,commandHandler:O,trigger:U(e,"trigger"),hideOnClick:U(e,"hideOnClick")}),{t:i,ns:t,scrollbar:w,wrapStyle:n,dropdownTriggerKls:d,dropdownSize:f,triggerId:m,triggerKeys:I,currentTabId:g,handleCurrentTabIdChange:M,handlerMainButtonClick:p=>{o("click",p)},handleEntryFocus:$,handleClose:F,handleOpen:K,handleShowTooltip:te,handleHideTooltip:Y,onFocusAfterTrapped:p=>{var q,le;p.preventDefault(),(le=(q=c.value)==null?void 0:q.focus)==null||le.call(q,{preventScroll:!0})},popperRef:a,contentRef:c,triggeringElementRef:u,referenceElementRef:l}}});function To(e,o,r,t,i,u){var l;const a=b("el-dropdown-collection"),c=b("el-roving-focus-group"),w=b("el-scrollbar"),g=b("el-only-child"),_=b("el-tooltip"),I=b("el-button"),n=b("arrow-down"),d=b("el-icon"),s=b("el-button-group");return P(),j("div",{class:Q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[R(_,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(l=e.referenceElementRef)==null?void 0:l.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:"",pure:"",persistent:"",onShow:e.handleShowTooltip,onHide:e.handleHideTooltip},Ze({content:v(()=>[R(w,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:v(()=>[R(c,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:v(()=>[R(a,null,{default:v(()=>[D(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:v(()=>[R(g,{id:e.triggerId,role:"button",tabindex:e.tabindex},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","onShow","onHide"]),e.splitButton?(P(),A(s,{key:0},{default:v(()=>[R(I,H({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:v(()=>[D(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),R(I,H({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:v(()=>[R(d,{class:Q(e.ns.e("icon"))},{default:v(()=>[R(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):x("v-if",!0)],2)}var Fo=B(Co,[["render",To],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const ko=G({name:"DropdownItemImpl",components:{ElIcon:ce},props:fe,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const r=ee("dropdown"),{role:t}=y(W,void 0),{collectionItemRef:i}=y(Ke,void 0),{collectionItemRef:u}=y(so,void 0),{rovingFocusGroupItemRef:l,tabIndex:a,handleFocus:c,handleKeydown:w,handleMousedown:g}=y(ge,void 0),_=we(i,u,l),I=T(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),n=S(d=>{const{code:s}=d;if(s===h.enter||s===h.space)return d.preventDefault(),d.stopImmediatePropagation(),o("clickimpl",d),!0},w);return{ns:r,itemRef:_,dataset:{[ze]:""},role:I,tabIndex:a,handleFocus:c,handleKeydown:n,handleMousedown:g}}}),$o=["aria-disabled","tabindex","role"];function Ro(e,o,r,t,i,u){const l=b("el-icon");return P(),j(eo,null,[e.divided?(P(),j("li",H({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):x("v-if",!0),Qe("li",H({ref:e.itemRef},L(L({},e.dataset),e.$attrs),{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=a=>e.$emit("clickimpl",a)),onFocus:o[1]||(o[1]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onKeydown:o[2]||(o[2]=(...a)=>e.handleKeydown&&e.handleKeydown(...a)),onMousedown:o[3]||(o[3]=(...a)=>e.handleMousedown&&e.handleMousedown(...a)),onPointermove:o[4]||(o[4]=a=>e.$emit("pointermove",a)),onPointerleave:o[5]||(o[5]=a=>e.$emit("pointerleave",a))}),[e.icon?(P(),A(l,{key:0},{default:v(()=>[(P(),A(xe(e.icon)))]),_:1})):x("v-if",!0),D(e.$slots,"default")],16,$o)],64)}var Oo=B(ko,[["render",Ro],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const be=()=>{const e=y("elDropdown",{}),o=T(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},So=G({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Me,ElRovingFocusItem:yo,ElDropdownItemImpl:Oo},inheritAttrs:!1,props:fe,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:r}){const{elDropdown:t}=be(),i=ve(),u=E(null),l=T(()=>{var n,d;return(d=(n=C(u))==null?void 0:n.textContent)!=null?d:""}),{onItemEnter:a,onItemLeave:c}=y(W,void 0),w=S(n=>(o("pointermove",n),n.defaultPrevented),de(n=>{var d;e.disabled?c(n):(a(n),n.defaultPrevented||(d=n.currentTarget)==null||d.focus())})),g=S(n=>(o("pointerleave",n),n.defaultPrevented),de(n=>{c(n)})),_=S(n=>(o("click",n),n.type!=="keydown"&&n.defaultPrevented),n=>{var d,s,m;if(e.disabled){n.stopImmediatePropagation();return}(d=t==null?void 0:t.hideOnClick)!=null&&d.value&&((s=t.handleClick)==null||s.call(t)),(m=t.commandHandler)==null||m.call(t,e.command,i,n)}),I=T(()=>L(L({},e),r));return{handleClick:_,handlePointerMove:w,handlePointerLeave:g,textContent:l,propsAndAttrs:I}}});function Po(e,o,r,t,i,u){var l;const a=b("el-dropdown-item-impl"),c=b("el-roving-focus-item"),w=b("el-dropdown-collection-item");return P(),A(w,{disabled:e.disabled,"text-value":(l=e.textValue)!=null?l:e.textContent},{default:v(()=>[R(c,{focusable:!e.disabled},{default:v(()=>[R(a,H(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:v(()=>[D(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var _e=B(So,[["render",Po],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Do=G({name:"ElDropdownMenu",props:Be,setup(e){const o=ee("dropdown"),{_elDropdownSize:r}=be(),t=r.value,{focusTrapRef:i,onKeydown:u}=y(ro,void 0),{contentRef:l,role:a,triggerId:c}=y(W,void 0),{collectionRef:w,getItems:g}=y(Ge,void 0),{rovingFocusGroupRef:_,rovingFocusGroupRootStyle:I,tabIndex:n,onBlur:d,onFocus:s,onMousedown:m}=y(ne,void 0),{collectionRef:N}=y(oe,void 0),F=T(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),K=we(l,w,i,_,N),f=S(k=>{var z;(z=e.onKeydown)==null||z.call(e,k)},k=>{const{currentTarget:z,code:M,target:$}=k;if(z.contains($),h.tab===M&&k.stopImmediatePropagation(),k.preventDefault(),$!==C(l)||!Ae.includes(M))return;const Y=g().filter(V=>!V.disabled).map(V=>V.ref);Le.includes(M)&&Y.reverse(),re(Y)});return{size:t,rovingFocusGroupRootStyle:I,tabIndex:n,dropdownKls:F,role:a,triggerId:c,dropdownListWrapperRef:K,handleKeydown:k=>{f(k),u(k)},onBlur:d,onFocus:s,onMousedown:m}}}),No=["role","aria-labelledby"];function Ko(e,o,r,t,i,u){return P(),j("ul",{ref:e.dropdownListWrapperRef,class:Q(e.dropdownKls),style:oo(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...l)=>e.onBlur&&e.onBlur(...l)),onFocus:o[1]||(o[1]=(...l)=>e.onFocus&&e.onFocus(...l)),onKeydown:o[2]||(o[2]=(...l)=>e.handleKeydown&&e.handleKeydown(...l)),onMousedown:o[3]||(o[3]=(...l)=>e.onMousedown&&e.onMousedown(...l))},[D(e.$slots,"default")],46,No)}var he=B(Do,[["render",Ko],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const jo=$e(Fo,{DropdownItem:_e,DropdownMenu:he}),Wo=me(_e),qo=me(he);export{Wo as E,qo as a,jo as b};
