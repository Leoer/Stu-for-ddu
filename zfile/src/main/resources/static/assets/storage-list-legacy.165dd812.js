System.register(["./admin-storage-legacy.72800729.js","./sortable.esm-legacy.a574004a.js","./index-legacy.c7b26f61.js","./request-legacy.e2497089.js","./index-legacy.2de5676a.js"],(function(e){"use strict";var a,t,n,s,r,c,o,i,l,d,u;return{setters:[function(e){a=e.d,t=e.s,n=e.a,s=e.b,r=e.l,c=e.c},function(e){o=e.S},function(e){i=e.E},function(e){l=e.E},function(e){d=e.r,u=e.c}],execute:function(){e("u",(function(e){const d=a=>{e.push("/admin/storage-edit/"+a.id)},w=e=>{i.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:t=>{"confirm"===t&&a(e.id).then((e=>{l.success("删除成功"),k()}))}})},p=a=>{e.push("/admin/storage-filter/"+a.id)},v=a=>{e.push("/admin/storage-readme/"+a.id)},y=a=>{e.push("/admin/storage-password/"+a.id)},x=e=>{i.confirm(`是否确认${e.enable?"停止":"启用"}存储源。`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:a=>{if("confirm"===a){let a=e.enable?"disable":"enable";t(e.id,a).then((()=>{l.success((e.enable?"停止":"启用")+"成功"),e.enable=!e.enable}))}}})},C=e=>{h.value=e.id,g.value=!0},k=()=>{f.value=!0,r().then((e=>{b.value=e.data,(()=>{const e=document.querySelector(".storage-container");o.create(e,{draggable:".storage-item",filter:".add-storage-btn",onEnd:e=>{if(e.oldIndex===e.newIndex)return;const a=b.value.splice(e.oldIndex,1)[0];b.value.splice(e.newIndex,0,a),c(b.value).then((()=>{l.success("调整排序成功")}))}})})(),f.value=!1}))},S=u((()=>""===m.value?b.value:b.value.filter((e=>!!(e.name&&-1!==e.name.toLowerCase().indexOf(m.value.toLowerCase())||e.remark&&-1!==e.remark.toLowerCase().indexOf(m.value.toLowerCase())||e.type&&-1!==e.type.description.toLowerCase().indexOf(m.value.toLowerCase())||e.type&&-1!==e.type.key.toLowerCase().indexOf(m.value.toLowerCase()))))));return{init:k,loading:f,searchKey:m,storageListSearchResult:S,handleOperator:e=>{switch(e.operator){case"edit":d(e.storage);break;case"enable":x(e.storage);break;case"readmeManager":v(e.storage);break;case"cacheManager":C(e.storage);break;case"filterManager":p(e.storage);break;case"pwdManager":y(e.storage);break;case"delete":w(e.storage)}},addStorage:()=>{e.push("/admin/storage-edit")},editStorage:d,deleteStorage:w,handleClose:e=>{i.confirm("是否确认关闭？关闭后填写的数据不会保留。",{type:"warning"}).then((a=>{e()})).catch((e=>{}))},showFilterPage:p,showReadmePage:v,showPasswordPage:y,switchEnableStatus:x,cacheManageVisible:g,currentCacheManageId:h,switchCacheEnableStatus:e=>{let a=e.enableCache?"enable":"disable";n(e.id,a).then((()=>{l.success("修改成功")}))},switchCacheAutoRefreshStatus:e=>{let a=e.autoRefreshCache?"start":"stop";s(e.id,a).then((()=>{l.success("修改成功")}))},cacheManage:C}}));let g=d(!1),h=d(),f=d(!1),b=d([]),m=d("")}}}));
