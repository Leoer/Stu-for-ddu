var ae=Object.defineProperty,ue=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var $=(n,s,u)=>s in n?ae(n,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[s]=u,j=(n,s)=>{for(var u in s||(s={}))oe.call(s,u)&&$(n,u,s[u]);if(W)for(var u of W(s))pe.call(s,u)&&$(n,u,s[u]);return n},G=(n,s)=>ue(n,se(s));import{d as de,r as ce,W as be,c as v,w as me,o as _e,an as he,a as _,f as z,Q as L,u as t,n as C,B as I,h as F,e as Q,b as y,k as Y,j as B,m as fe}from"./index.9f622a37.js";import{E as ge}from"./index.36cab1dc.js";import{b as ve,J as Ne,I as b,k as N,u as we,aw as xe,W as E,a4 as Ve,q as Ie,a6 as ye,aQ as Ee,E as q,a7 as ke,aR as Se,_ as Pe,o as H,w as Ae}from"./base.130d3d79.js";import{C as ze,I as Ce,U as Fe}from"./event.776e7e11.js";import{u as Be}from"./index.0cd3ee2d.js";import{v as J}from"./index.7fa0be7b.js";const Te=ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:Ne,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||b(n)||["min","max"].includes(n),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)}}),De={[ze]:(n,s)=>n!==s,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[Ce]:n=>b(n)||N(n),[Fe]:n=>b(n)||N(n)},Ke=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=de(G(j({},Oe),{props:Te,emits:De,setup(n,{expose:s,emit:u}){const l=n,{t:T}=Be(),c=we("input-number"),f=ce(),o=be({currentValue:l.modelValue,userInput:null}),{formItem:h}=xe(),D=v(()=>b(l.modelValue)&&w(l.modelValue,-1)<l.min),K=v(()=>b(l.modelValue)&&w(l.modelValue)>l.max),X=v(()=>{const e=U(l.step);return E(l.precision)?Math.max(U(l.modelValue),e):(e>l.precision,l.precision)}),k=v(()=>l.controls&&l.controlsPosition==="right"),M=Ve(),g=Ie(),Z=v(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(N(e))return"";if(b(e)){if(Number.isNaN(e))return"";E(l.precision)||(e=e.toFixed(l.precision))}return e}),O=(e,r)=>{if(E(r)&&(r=X.value),r===0)return Math.round(e);let i=String(e);const a=i.indexOf(".");if(a===-1||!i.replace(".","").split("")[a+r])return e;const x=i.length;return i.charAt(x-1)==="5"&&(i=`${i.slice(0,Math.max(0,x-1))}6`),Number.parseFloat(Number(i).toFixed(r))},U=e=>{if(N(e))return 0;const r=e.toString(),i=r.indexOf(".");let a=0;return i!==-1&&(a=r.length-i-1),a},w=(e,r=1)=>b(e)?O(e+l.step*r):o.currentValue,S=()=>{if(g.value||K.value)return;const e=l.modelValue||0,r=w(e);A(r)},P=()=>{if(g.value||D.value)return;const e=l.modelValue||0,r=w(e,-1);A(r)},R=(e,r)=>{const{max:i,min:a,step:p,precision:m,stepStrictly:x,valueOnClear:V}=l;let d=Number(e);if(N(e)||Number.isNaN(d))return null;if(e===""){if(V===null)return null;d=fe(V)?{min:a,max:i}[V]:V}return x&&(d=Math.round(d/p)*p),E(m)||(d=O(d,m)),(d>i||d<a)&&(d=d>i?i:a,r&&u("update:modelValue",d)),d},A=e=>{var r;const i=o.currentValue,a=R(e);i!==a&&(o.userInput=null,u("update:modelValue",a),u("input",a),u("change",a,i),(r=h==null?void 0:h.validate)==null||r.call(h,"change").catch(p=>H()),o.currentValue=a)},ee=e=>o.userInput=e,re=e=>{const r=e!==""?Number(e):"";(b(r)&&!Number.isNaN(r)||e==="")&&A(r),o.userInput=null},ne=()=>{var e,r;(r=(e=f.value)==null?void 0:e.focus)==null||r.call(e)},te=()=>{var e,r;(r=(e=f.value)==null?void 0:e.blur)==null||r.call(e)},le=e=>{u("focus",e)},ie=e=>{var r;u("blur",e),(r=h==null?void 0:h.validate)==null||r.call(h,"blur").catch(i=>H())};return me(()=>l.modelValue,e=>{o.currentValue=R(e,!0),o.userInput=null},{immediate:!0}),_e(()=>{var e;const{min:r,max:i,modelValue:a}=l,p=(e=f.value)==null?void 0:e.input;if(p.setAttribute("role","spinbutton"),Number.isFinite(i)?p.setAttribute("aria-valuemax",String(i)):p.removeAttribute("aria-valuemax"),Number.isFinite(r)?p.setAttribute("aria-valuemin",String(r)):p.removeAttribute("aria-valuemin"),p.setAttribute("aria-valuenow",String(o.currentValue)),p.setAttribute("aria-disabled",String(g.value)),!b(a)&&a!=null){let m=Number(a);Number.isNaN(m)&&(m=null),u("update:modelValue",m)}}),he(()=>{var e;const r=(e=f.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${o.currentValue}`)}),s({focus:ne,blur:te}),(e,r)=>(_(),z("div",{class:C([t(c).b(),t(c).m(t(M)),t(c).is("disabled",t(g)),t(c).is("without-controls",!e.controls),t(c).is("controls-right",t(k))]),onDragstart:r[0]||(r[0]=B(()=>{},["prevent"]))},[e.controls?L((_(),z("span",{key:0,role:"button","aria-label":t(T)("el.inputNumber.decrease"),class:C([t(c).e("decrease"),t(c).is("disabled",t(D))]),onKeydown:I(P,["enter"])},[F(t(q),null,{default:Q(()=>[t(k)?(_(),y(t(ye),{key:0})):(_(),y(t(Ee),{key:1}))]),_:1})],42,Ke)),[[t(J),P]]):Y("v-if",!0),e.controls?L((_(),z("span",{key:1,role:"button","aria-label":t(T)("el.inputNumber.increase"),class:C([t(c).e("increase"),t(c).is("disabled",t(K))]),onKeydown:I(S,["enter"])},[F(t(q),null,{default:Q(()=>[t(k)?(_(),y(t(ke),{key:0})):(_(),y(t(Se),{key:1}))]),_:1})],42,Me)),[[t(J),S]]):Y("v-if",!0),F(t(ge),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":t(Z),placeholder:e.placeholder,disabled:t(g),size:t(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[I(B(S,["prevent"]),["up"]),I(B(P,["prevent"]),["down"])],onBlur:ie,onFocus:le,onInput:ee,onChange:re},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var Re=Pe(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const qe=Ae(Re);export{qe as E};
