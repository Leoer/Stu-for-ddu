!function(){var e=document.createElement("style");e.innerHTML=".el-button[data-v-121e9c7e],.el-input[data-v-121e9c7e] input{height:35px}\n",document.head.appendChild(e),System.register(["./base-legacy.f53a0713.js","./loading-legacy.36861a78.js","./ZFormItem-legacy.ee097f08.js","./button-legacy.9af9d3a6.js","./input-number-legacy.aa6937e6.js","./input-legacy.1469b40d.js","./index-legacy.2de5676a.js","./admin-setting-legacy.ac753087.js","./request-legacy.e2497089.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.c7b26f61.js","./BadgeCheckIcon-legacy.0ba87333.js","./index-legacy.bb28c642.js","./directive-legacy.1ac5dcca.js","./index-legacy.61ab75a6.js","./event-legacy.39ad8904.js","./index-legacy.66af6ab6.js","./index-legacy.886e1b44.js","./event-legacy.0bfbd831.js","./index-legacy.b9e82fd1.js","./scroll-legacy.20579f08.js","./focus-trap-legacy.e6bab6c4.js","./validator-legacy.21431d38.js"],(function(e){"use strict";var a,n,t,l,o,i,c,u,d,r,s,f,m,p,g,y,b,v,x,j,V,_,h,w,U,k,D,C;return{setters:[function(e){a=e.aO,n=e.x,t=e.aP,l=e.r},function(){},function(e){o=e.Z,i=e.a},function(){},function(e){c=e.E},function(){},function(e){u=e.a,d=e.b,r=e.h,s=e.aA,f=e.$,m=e.r,p=e.w,g=e.u,y=e.Q,b=e.e,v=e.k,x=e.J},function(e){j=e.l,V=e.u},function(e){_=e.E},function(e){h=e.b},function(e){w=e._},function(e){U=e.E},function(e){k=e.r},function(e){D=e.E},function(e){C=e.v},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function B(e,a){return u(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])}const L=x(" 站点信息 "),z=x(" 请填写您的站点信息 "),E=x("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样."),F=x("前后端分离后，需配置此地址，会影响 401、403、404 页面的跳转."),N=x("用于管理员页面右上角头像地址，推荐尺寸为 35 * 35."),T=x("保存设置"),$={__name:"site-setting",setup(e){let x=f();const h=function(){const e=s(j,{formatResult:e=>e.data}),a=e.data,n=e.loading,t=e.reload,l=s(V,{manual:!0,onSuccess(){_({message:"保存成功",type:"success"})}}),o=l.loading,i=l.run;return{data:a,dataLoading:n,reload:t,saveData:()=>{i(a.value)},saveLoading:o}}(),w=h.data,$=h.dataLoading,q=h.saveData,I=h.saveLoading;let S=m({siteName:[{required:!0,message:"请输入站点名称"}],domain:[{required:!0,message:"请输入后端站点域名"},{type:"url",message:"请输入正确的域名"}],frontDomain:[{type:"url",message:"请输入正确的域名"}],avatar:[{type:"url",message:"请输入正确的头像地址，需以 http 或 https 开头"}]});const A=m(),M=()=>{A.value.validate((e=>{e&&q()}))};return p((()=>$.value),((e,a)=>{if(!0===a){let e=x.zfileConfig.baseUrl||window.location.origin,a=w.value.domain;if(e!==a)U.confirm(`检测到服务端地址为 ${e}，当前配置站点域名为 ${a}，是否自动进行修正？（不修正可能会影响下载、文件夹加密和文档预览功能）`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:a=>{"confirm"===a&&(w.value.domain=e,M())}});else{let e=w.value.frontDomain,a=window.location.origin;""!==x.zfileConfig.baseUrl&&e!==a&&U.confirm(`检测到当前为前后端分离模式，访问域名为 ${a}，当前配置前端站点域名为 ${e}，是否自动进行修正？（不修正可能会防盗链功能）`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:e=>{"confirm"===e&&(w.value.frontDomain=a,M())}})}}})),(e,s)=>{const f=D,m=o,p=c,x=l,j=i,V=C;return g(w)?y((u(),d(j,{key:0,model:g(w),rules:g(S),ref_key:"siteSettingForm",ref:A},{"form-title":b((()=>[L])),"form-sub-title":b((()=>[z])),footer:b((()=>[r(x,{type:"primary",size:"default",icon:g(k),onClick:M},{default:b((()=>[T])),_:1},8,["icon"])])),default:b((()=>[r(m,{prop:"siteName",label:"站点名称"},{default:b((()=>[r(f,{id:"siteName","prefix-icon":g(a),modelValue:g(w).siteName,"onUpdate:modelValue":s[0]||(s[0]=e=>g(w).siteName=e)},null,8,["prefix-icon","modelValue"])])),_:1}),r(m,{prop:"domain",label:"后端站点域名"},{tips:b((()=>[E])),default:b((()=>[r(f,{id:"domain","prefix-icon":g(n),modelValue:g(w).domain,"onUpdate:modelValue":s[1]||(s[1]=e=>g(w).domain=e)},null,8,["prefix-icon","modelValue"])])),_:1}),r(m,{prop:"frontDomain",label:"前端站点域名"},{tips:b((()=>[F])),default:b((()=>[r(f,{"prefix-icon":g(n),modelValue:g(w).frontDomain,"onUpdate:modelValue":s[2]||(s[2]=e=>g(w).frontDomain=e)},null,8,["prefix-icon","modelValue"])])),_:1}),r(m,{prop:"avatar",label:"头像地址"},{tips:b((()=>[N])),default:b((()=>[r(f,{id:"avatar","prefix-icon":g(t),modelValue:g(w).avatar,"onUpdate:modelValue":s[3]||(s[3]=e=>g(w).avatar=e)},null,8,["prefix-icon","modelValue"])])),_:1}),r(m,{label:"备案号"},{default:b((()=>[r(f,{id:"icp","prefix-icon":g(B),modelValue:g(w).icp,"onUpdate:modelValue":s[4]||(s[4]=e=>g(w).icp=e)},null,8,["prefix-icon","modelValue"])])),_:1}),r(m,{label:"最大同时上传文件数"},{default:b((()=>[r(p,{id:"maxFileUploads",modelValue:g(w).maxFileUploads,"onUpdate:modelValue":s[5]||(s[5]=e=>g(w).maxFileUploads=e),min:1,max:99},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[V,g(I)]]):v("",!0)}}};"function"==typeof h&&h($);e("default",w($,[["__scopeId","data-v-121e9c7e"]]))}}}))}();
